define("components/components/bootstrap/siteButton/santaTypes/buttonSantaTypes",["lodash","react","santaProps","siteUtils"],function(e,t,i,o){"use strict";return{Link:i.createSantaType(t.PropTypes.object,function(t,s){var n=i.Types.Component.compData.fetch(t,s);if(!e.get(n,"link"))return null;var a=i.Types.Link.linkRenderInfo.fetch(t,s),r=i.Types.Component.rootNavigationInfo.fetch(t,s);return o.linkRenderer.renderLink(n.link,a,r)},!0)}}),define("components/components/bootstrap/siteButton/siteButton",["lodash","react","utils","core","santaProps","buttonCommon","coreUtils","components/components/bootstrap/siteButton/santaTypes/buttonSantaTypes","experiment"],function(e,t,i,o,s,n,a,r,p){"use strict";var l=a.anchorTagsGenerator,c={displayName:"SiteButton",mixins:[o.compMixins.skinBasedComp,n.buttonMixin],propTypes:{compData:s.Types.Component.compData,isMobileDevice:s.Types.Device.isMobileDevice,isMobileView:s.Types.isMobileView,link:r.Link},statics:{useSantaTypes:!0},getDefaultProps:function(){return{shouldUseFlex:!0}},getInitialState:function(){return{$mobile:this.props.isMobileDevice?"mobile":"desktop",$shouldUseFlex:this.props.shouldUseFlex?"shouldUseFlex":"",$align:this.props.compProp.align}},componentWillReceiveProps:function(e){this.setState({$align:e.compProp.align})},getImpliedLink:function(){if(!this.props.noAutoLinkGeneration){var t=l.getIncludedPatterns(p,this.props.isMobileView);return e.head(l.findDataForAnchors(this.props.compData.label,t))}},getLinkSkinPart:function(){var o=this.props.compProp,s={parentConst:t.DOM.div};if(o.isDisabled)return s;if(this.props.link){var n=this.props.link,a={role:"button",onKeyDown:i.accessibility.keyboardInteractions.activateBySpaceButton};return e.assign(n,a)}return this.getImpliedLink()||s},getSkinProperties:function(){this.lastScale=this.props.scale||1;var e=this.props.compData,t=this.props.compProp,i=!!t.isDisabled,o=this.getLinkSkinPart();o.style={},this.props.shouldUseFlex||(o.style.textAlign=t.align);var s={"":{id:this.props.id,key:"f"+this.getDesktopFontSize()*this.currentScale,ref:this.props.id,"data-align":t.align,"data-disabled":i,"data-margin":t.margin,"data-should-use-flex":this.props.shouldUseFlex},label:{children:[e.label],style:this.getLabelStyle()},link:o};return this.props.onClick&&!i&&(s[""].onClick=this.props.onClick),this.resetMinHeightIfNeeded(s),s}};return o.compRegistrar.register("wysiwyg.viewer.components.SiteButton",c,!0),c}),define("components/components/bootstrap/menuButton/menuButton",["lodash","react","core","reactDOM","santaProps","utils"],function(e,t,i,o,s,n){"use strict";function a(e){return(e=e&&e.trim())||"Â "}var r=i.compMixins,p={displayName:"MenuButton",propTypes:{isMobileView:s.Types.isMobileView,isMobileDevice:s.Types.Device.isMobileDevice,isTabletDevice:s.Types.Device.isTabletDevice,compProp:s.Types.Component.compProp,compData:s.Types.Component.compData,style:s.Types.Component.style,refInParent:s.Types.Component.refInParent,isContainer:t.PropTypes.bool,isSelected:t.PropTypes.bool,display:t.PropTypes.string,positionInList:t.PropTypes.string,dir:t.PropTypes.string,mouseEnterHandler:t.PropTypes.func.isRequired,mouseLeaveHandler:t.PropTypes.func.isRequired,onMouseClick:t.PropTypes.func.isRequired,isDropDownButton:t.PropTypes.bool,parentId:t.PropTypes.string},statics:{useSantaTypes:!0},mixins:[r.skinBasedComp,r.skinInfo],getInitialState:function(){return{$container:this.props.isContainer?"drop":"menu",$selected:this.props.isSelected?"selected":"",$state:"idle",$type:this.props.compData.link?"link":"header",$mobile:this.props.isMobileDevice||this.props.isMobileView||this.props.isTabletDevice?"mobile":"notMobile"}},componentWillReceiveProps:function(e){this.setState({$selected:e.isSelected?"selected":""})},getSkinProperties:function(){var i=this.props.compData,o=this.props.compProp.alignText,s={parentConst:t.DOM.a,onClick:this.onMouseClick,role:"button",tabIndex:this.props.isDropDownButton?"-1":"0","aria-haspopup":this.props["aria-haspopup"],"data-listposition":this.props.positionInList};return"mobile"!==this.state.$mobile&&e.assign(s,{onMouseEnter:this.openSubMenu,onMouseLeave:this.closeSubMenu,onFocus:this.openSubMenu,onBlur:this.closeSubMenu,onKeyDown:n.accessibility.keyboardInteractions.activateBySpaceButton}),i.link&&e.merge(s,i.link.render),{"":{tagName:this.props.tagName||"div","data-direction":this.props.direction,"data-listposition":this.props.positionInList,"data-parent-id":this.props.parentId,"data-data-id":this.props.dataId},linkElement:s,bg:{style:{textAlign:o}},label:{children:a(i.label),dir:this.props.dir,style:{textAlign:o}}}},openSubMenu:function(){(this.props.compData.link||"__more__"===this.props.refInParent)&&this.setState({$state:"over"});var e=o.findDOMNode(this);this.props.mouseEnterHandler(this.props.refInParent,e.getAttribute("data-listposition"))},closeSubMenu:function(){this.props.isDropDownButton&&this.setIdleState(),this.props.mouseLeaveHandler(this.props.refInParent)},onMouseClick:function(e){"notMobile"!==this.state.$mobile&&this.props.onMouseClick(e,this.props.refInParent,this.props.isDropDownButton)},setIdleState:function(){this.setState({$state:"idle"})}};return i.compRegistrar.register("core.components.MenuButton",p),p}),define("components/components/bootstrap/dropDownMenu/dropDownMenu",["lodash","utils","core","santaProps","components/components/bootstrap/menuButton/menuButton","reactDOM","zepto"],function(e,t,i,o,s,n,a){"use strict";function r(e,i,o){return"userLang"===e?t.wixUserApi.getLanguage(i,o):e}function p(e){return!isNaN(parseFloat(e))&&isFinite(e)}function l(e,t,i,o,s,n){return n===e.length-1?1===e.length?"dropLonely":t?"bottom":i||"right"===o?s?"left":"right":"center":0===n?t?"top":i||"left"===o?s?"right":"left":"center":t?"dropCenter":"center"}function c(i,o,s,n,a){var r,p=e.some(s,["link.pageId.id",o]),l={AnchorLink:function(t){return(e.has(t.anchorDataId,"id")?t.anchorDataId.id:t.anchorDataId)===r},PageLink:function(e){if(!r){if(e.pageId.isPopup)return e.pageId.id===o;if(!p)return e.pageId.id===i}return!1}};return n&&(r=t.menuUtils.getActiveAnchorInPage(a,s,i)),function(e){var t=e&&l[e.type];return!!t&&t(e)}}function d(t,i,o,s,n,a,r,p,d){return e.map(i,function(e,u){var h=e.link,m=c(a,r,i,d,t);return{isContainer:Boolean(o),isSelected:m(h),positionInList:l(i,o,s,n,p,u)}})}function u(t){return e.flatMap(t,function(t){var i=[];return t.items&&(i=e.map(t.items,function(i){return e.assign(i,{parent:t.id})})),[t].concat(i)})}var h=i.compMixins,m=["da","de","en","es","fr","hi","it","ja","ko","nl","no","pl","pt","ru","sv","tr"],y={displayName:"DropDownMenu",propTypes:e.assign({isMobileView:o.Types.isMobileView,isMobileDevice:o.Types.Device.isMobileDevice,isTabletDevice:o.Types.Device.isTabletDevice,anchorChangeEvent:o.Types.SiteAspects.anchorChangeEvent,currentUrlPageId:o.Types.Component.currentUrlPageId,currentPopupId:o.Types.currentPopupId,highlightAnchorsInMenu:o.Types.BrowserFlags.highlightAnchorsInMenu.isRequired,menuItems:o.Types.Menu.menuItems,id:o.Types.Component.id,refInParent:o.Types.Component.refInParent,skin:o.Types.Component.skin,compProp:o.Types.Component.compProp,compData:o.Types.Component.compData},o.santaTypesUtils.getSantaTypesByDefinition(s)),statics:{useSantaTypes:!0},mixins:[h.skinBasedComp,h.timeoutsMixin,h.skinInfo],getInitialState:function(){return this.shouldChildrenUpdate=!1,{hover:null,hoverListPosition:null,activeAnchor:null,$dropAlign:this.props.compProp.alignButtons,$mobile:this.props.isMobileDevice||this.props.isMobileView||this.props.isTabletDevice?"mobile":"notMobile"}},componentDidMount:function(){this.props.highlightAnchorsInMenu&&this.props.anchorChangeEvent.registerToAnchorChange(this)},componentWillUnmount:function(){this.props.highlightAnchorsInMenu&&this.props.anchorChangeEvent.unregisterToAnchorChange(this)},convertItemsToChildren:function(t,i,o,s){(i=i||{}).style=i.style||{};var n=d(this.state.activeAnchor,t,s,this.props.compProp.stretchButtonsToMenuWidth,this.props.compProp.alignButtons,this.props.currentUrlPageId,this.props.currentPopupId,this.props.compProp.rtl,this.props.highlightAnchorsInMenu);return e.map(t,function(t,o){var a=(s?"moreContainer":"")+o;return this.createChildComponent(t,"core.components.MenuButton","repeaterButton",e.merge({isContainer:n[o].isContainer,isSelected:n[o].isSelected,positionInList:n[o].positionInList,id:this.props.id+a,ref:a,key:t.id,refInParent:a,mouseEnterHandler:this.mouseEnterHandler,mouseLeaveHandler:this.mouseLeaveHandler,isDropDownButton:s,onMouseClick:this.onMouseClick,"aria-haspopup":t.items.length>0,tagName:"li",direction:this.props.compProp.rtl?"rtl":"ltr",parentId:t.parent,dataId:t.id},i))}.bind(this))},onMouseClick:function(e,t,i){if(i)this.mouseLeaveHandler();else{var o=("__more__"!==t?this.props.menuItems[t].items:[]).length>0||"__more__"===t,s=this.state.hover;!this.dropDownOpen&&o?(this.mouseEnterHandler(t),e.preventDefault(),e.stopPropagation()):this.dropDownOpen&&!this.isDropdownOwner(t,s)&&o?(this.mouseLeaveHandler(),e.preventDefault(),e.stopPropagation(),this.mouseEnterHandler(t)):this.dropDownOpen&&this.mouseLeaveHandler()}},onAnchorChange:function(e){e!==this.state.activeAnchor&&this.setState({activeAnchor:e})},isDropdownOwner:function(e,t){return e===t},createMoreButton:function(e){var t=e?"left":"right",i=this.props.compProp.alignButtons;return this.props.compProp.stretchButtonsToMenuWidth||"right"===i||(t="center"),this.createChildComponent({id:"__more__",label:this.props.compProp.moreButtonLabel},"core.components.MenuButton","repeaterButton",{isSelected:!1,positionInList:t,id:this.props.id+"__more__",ref:"__more__",key:"__more__",mouseEnterHandler:this.mouseEnterHandler,mouseLeaveHandler:this.mouseLeaveHandler,onFocus:this.mouseEnterHandler,onBlur:this.mouseLeaveHandler,"aria-haspopup":!0,tagName:"li",onKeyDown:this.subMenuKeyDownHandler,onMouseClick:this.onMouseClick,isDropDownButton:!1,display:"inline-block"})},mouseEnterHandler:function(i,o){this.hovering=!0,this.lastHovered=this.getCurrentTime();var s=i.replace(this.props.id,"");-1!==e.keys(this.props.menuItems).concat("__more__").indexOf(s)&&(p(s)||t.stringUtils.startsWith(i,"__"))&&i!==this.state.hover&&(this.state.hover&&this.refs[this.state.hover].setIdleState(),this.registerReLayout(),this.setState({hover:i,hoverListPosition:o}))},getCurrentTime:function(){return Date.now()},mouseLeaveHandler:function(){this.hovering=!1,this.lastHovered=this.getCurrentTime(),!this.dropDownOpen&&this.state.hover&&this.refs[this.state.hover].setIdleState(),this.setTimeout(function(){var e=this.getCurrentTime()-this.lastHovered;!this.hovering&&this.state.hover&&e>=1e3&&(this.refs[this.state.hover].setIdleState(),this.dropDownOpen=!1,this.setState({hover:null,hoverListPosition:null}))}.bind(this),1e3)},getParamsFromSkins:function(){return{menuBorderY:this.getSumParamValue("menuTotalBordersY",this.props.skin),menuBtnBorder:this.getSumParamValue("menuButtonBorders",this.getSkinExports().repeaterButton.skin),ribbonEls:this.getParamFromDefaultSkin("ribbonEls").value?parseInt(this.getParamFromDefaultSkin("ribbonEls").value,10):0,labelPad:this.getFromExports("labelPad"),ribbonExtra:this.getFromExports("ribbonExtra")?Math.abs(parseInt(this.getFromExports("ribbonExtra"),10)):0}},shiftFocusToSubMenu:function(i){var o=this.refs["moreContainer"+i],s=n.findDOMNode(o),r=t.accessibility.getTabbaleElements(s,!0);a(e.head(r)).focus(),this.currentFocusedSubMenuIndex=i},getFirstIndexOfSubMenu:function(){for(var e,t=0;t<this.subMenuItems.length;t++)if(e=n.findDOMNode(this.refs["moreContainer"+t]),"none"!==window.getComputedStyle(e).display)return t;return 0},mainMenuKeyDownHandler:function(e){if(this.dropDownOpen){var t;"ArrowDown"===e.key&&(e.stopPropagation(),e.preventDefault(),t=this.getFirstIndexOfSubMenu(),this.shiftFocusToSubMenu(t)),"ArrowUp"===e.key&&(e.stopPropagation(),e.preventDefault(),t=this.subMenuItems.length,this.shiftFocusToSubMenu(t-1))}},subMenuKeyDownHandler:function(i){var o,s;("ArrowDown"===i.key||!i.shiftKey&&"Tab"===i.key)&&(i.stopPropagation(),i.preventDefault(),(o=this.currentFocusedSubMenuIndex+1)===this.subMenuItems.length&&(o=this.getFirstIndexOfSubMenu()),this.shiftFocusToSubMenu(o)),("ArrowUp"===i.key||i.shiftKey&&"Tab"===i.key)&&(i.stopPropagation(),i.preventDefault(),((o=this.currentFocusedSubMenuIndex-1)<0||o<this.getFirstIndexOfSubMenu())&&(o=this.subMenuItems.length-1),this.shiftFocusToSubMenu(o)),"Escape"===i.key&&(i.stopPropagation(),i.preventDefault(),s="__more__"===this.state.hover?t.accessibility.getTabbaleElements(n.findDOMNode(this.refs[this.state.hover])):t.accessibility.getTabbaleElements(this.refs.itemsContainer.children[this.state.hover]),e.head(s).focus(),this.setState({hover:null}))},getLanguage:function(){var t=r(this.props.compProp.dataLang,this.props.cookie,this.props.currentUrl);return e.includes(m,t)?t:"en"},getAriaLabel:function(){var i=this.getLanguage();return e.get(t.translations.blogTranslations,[i,"mainMenuAriaLabel"],"Site navigation")},getSkinProperties:function(){var e=this.getParamsFromSkins(),t=this.convertItemsToChildren(this.props.menuItems,{display:"inherit"},null,null),i=[],o="hidden";return t.push(this.createMoreButton(this.props.compProp.rtl)),(p(this.state.hover)||"__more__"===this.state.hover)&&(i=this.convertItemsToChildren(p(this.state.hover)?this.props.menuItems[this.state.hover].items:u(this.props.menuItems),{style:{width:"100%"},display:"block",prefix:"_",subMenu:!0},!0,!0)).length>0&&(o="inherit",this.dropDownOpen=!0,this.subMenuItems=i),{"":{id:this.props.id,key:this.props.refInParent,ref:this.props.refInParent,"data-menuborder-y":e.menuBorderY,"data-menubtn-border":e.menuBtnBorder,"data-ribbon-els":e.ribbonEls,"data-label-pad":e.labelPad,"data-ribbon-extra":e.ribbonExtra,"data-drophposition":this.state.hover?this.state.hoverListPosition:"","data-dropalign":this.props.compProp.alignButtons,dir:this.props.compProp.rtl?"rtl":"ltr",tagName:"nav"},itemsContainer:{children:t,style:{textAlign:this.props.compProp.alignButtons},onKeyDown:this.mainMenuKeyDownHandler,"aria-label":this.getAriaLabel(),role:"navigation"},moreContainer:{onKeyDown:this.subMenuKeyDownHandler,children:i,"data-hover":this.state.hover,style:{visibility:o},id:this.props.id+"moreContainer"},dropWrapper:{style:{visibility:o},"data-drophposition":this.state.hover?this.state.hoverListPosition:"","data-dropalign":this.props.compProp.alignButtons}}}};return i.compRegistrar.register("wysiwyg.viewer.components.menus.DropDownMenu",y,!0),y}),define("components/components/bootstrap/balata/balata",["react","lodash","santaProps","core","coreUtils","backgroundCommon"],function(e,t,i,o,s,n){"use strict";function a(e,i,o){var s=i[g[e]]||{},n=t.get(o,["transforms",e],{}),a=t.merge({},s,n),r={};return a.opacity&&(r.opacity=a.opacity,a=t.omit(a,"opacity")),t.isEmpty(a)||(r.transform=t.reduce(a,function(e,t,i){return e+=i+"("+t+") "},"")),r}function r(e,t,i,o){var s={skin:f.skin,styleId:f.style},n={style:a(g.MEDIA,i,t),id:e.id+f.ref,ref:f.ref,bgEffectName:o,filterEffect:i.filterEffect,fittingType:i.fittingType,alignType:i.alignType,mediaTransforms:i.mediaTransforms,enableVideo:e.enableVideo,notifyMediaState:e.notifyMediaState,mediaQuality:e.mediaQuality,renderParts:e.renderParts,setMediaAPI:e.setMediaAPI,compProp:e.compProp,isPlayingAllowed:e.isPlayingAllowed,playerInteraction:e.playerInteraction};return this.createChildComponent(i.mediaRef,f.comp,s,n)}function p(e,t,i,o){var s={skin:v.skin,styleId:v.style},n={style:a(g.OVERLAY,i,t),colorOverlay:i.colorOverlay,colorOverlayOpacity:i.colorOverlayOpacity,imageOverlay:i.imageOverlay,bgEffectName:o,id:e.id+v.ref,ref:v.ref};return this.createChildComponent(null,v.comp,s,n)}function l(e,t,i,o){var s={skin:b.skin,styleId:b.style},n={style:a(g.UNDERLAY,i,t),colorOverlay:i.color,colorOverlayOpacity:c(i.colorOpacity,i.mediaRef),bgEffectName:o,id:e.id+b.ref,ref:b.ref};return this.createChildComponent(null,b.comp,s,n)}function c(e,t){return!t||"WixVideo"!==t.type&&"Video"!==t.type?e:0}function d(e){var t=e.mediaRef,i=e.imageOverlay||e.colorOverlay,o=e.showOverlayForMediaType||"WixVideo",s=t&&("all"===o||o===t.type);return!(!i||!s)}function u(e){return t.get(e.compDesign,"background",t.get(e.compData,"background",{}))}function h(e,i){var o=u(e);if(t.isEmpty(o))return null;var s=y.getBgEffectName(e.compBehaviors,e.isDesktopDevice,e.isMobileView),n=[];return n.push(l.call(this,e,i,o,s)),t.isEmpty(o.mediaRef)||n.push(r.call(this,e,i,o,s)),d(o)&&n.push(p.call(this,e,i,o,s)),n}var m=o.compMixins,y=s.containerBackgroundUtils,g=s.balataConsts,f={comp:"wysiwyg.viewer.components.background.bgMedia",skin:"skins.viewer.bgMedia.bgMediaSkin",style:"bgMedia",ref:g.MEDIA},v={comp:"wysiwyg.viewer.components.background.bgOverlay",skin:"skins.viewer.bgOverlay.bgOverlaySkin",style:"bgOverlay",ref:g.OVERLAY},b={comp:"wysiwyg.viewer.components.background.bgOverlay",skin:"skins.viewer.bgOverlay.bgOverlaySkin",style:"bgColor",ref:g.BG_COLOR},P={displayName:"Balata",mixins:[m.skinBasedComp,n.mixins.backgroundDetectionMixin],propTypes:t.defaults({id:e.PropTypes.string.isRequired,parentId:e.PropTypes.string.isRequired,compData:e.PropTypes.object,compDesign:e.PropTypes.object,compProp:e.PropTypes.object,compBehaviors:e.PropTypes.object,style:e.PropTypes.object,onClick:e.PropTypes.func,isDesktopDevice:i.Types.Device.isDesktopDevice.isRequired,isMobileView:i.Types.isMobileView.isRequired,designDataChangeAspect:i.Types.SiteAspects.designDataChangeAspect.isRequired,isPlayingAllowed:e.PropTypes.bool,enableVideo:e.PropTypes.bool,notifyMediaState:e.PropTypes.func,setMediaAPI:e.PropTypes.func,mediaQuality:e.PropTypes.string,renderParts:e.PropTypes.object},i.santaTypesUtils.getSantaTypesByDefinition(n.components.bgMedia),i.santaTypesUtils.getSantaTypesByDefinition(n.components.bgOverlay)),statics:{useSantaTypes:!0},getInitialState:function(){return{transforms:{}}},componentWillReceiveProps:function(e){this.handleDesignDataBehaviors(e)},handleDesignDataBehaviors:function(e){var t=u(e),i=u(this.props);this.setState({transforms:{}}),i.id!==t.id&&this.props.designDataChangeAspect.notify(this.props.parentId,this.props.compDesign,e.compDesign)},getSkinProperties:function(){var e=y.getBgEffectName(this.props.compBehaviors,this.props.isDesktopDevice,this.props.isMobileView),i=h.call(this,this.props,this.state);return{"":{style:t.assign({position:"absolute",top:0,width:"100%",height:"100%",pointerEvents:e?"none":"auto"},this.props.style),children:i,onClick:this.props.onClick,key:"balata_"+e,"data-enable-video":this.props.enableVideo}}},getDefaultSkinName:function(){return"skins.viewer.balata.balataBaseSkin"}};return o.compRegistrar.register("wysiwyg.viewer.components.background.Balata",P),P}),define("components/common/mediaCommon/mediaLogic/fillLogicMixin",["lodash","react","santaProps","coreUtils","components/components/bootstrap/balata/balata"],function(e,t,i,o,s){"use strict";function n(t){return e.get(t.compDesign,["background","mediaRef"],e.get(t.compData,["background","mediaRef"]))||{}}function a(t,i){var o=e.pick(t,r.playback.SUPPORTED_MEDIA_ATTRIBUTES),s=e.pick(i,r.playback.SUPPORTED_MEDIA_ATTRIBUTES);return e.assign(o,s)}var r=o.mediaConsts;return{propTypes:e.defaults({id:i.Types.Component.id.isRequired,styleId:i.Types.Component.styleId.isRequired,compProp:i.Types.Component.compProp,compData:i.Types.Component.compData,compDesign:i.Types.Component.compDesign,compStaticBehaviors:i.Types.Component.compStaticBehaviors,compDynamicBehaviors:i.Types.Component.compDynamicBehaviors,bgStyle:t.PropTypes.object,onClick:t.PropTypes.func,mediaAspect:i.Types.SiteAspects.mediaAspect.isRequired,mediaQuality:i.Types.Media.mediaQuality,renderParts:i.Types.Media.renderParts,isDesktopDevice:i.Types.Device.isDesktopDevice.isRequired,isMobileView:i.Types.isMobileView.isRequired,isPlayingAllowed:i.Types.RenderFlags.isPlayingAllowed.isRequired},i.santaTypesUtils.getSantaTypesByDefinition(s)),getInitialState:function(){return this.registerPlayer(this.props),this.mediaAPI=null,{}},componentWillReceiveProps:function(e){this.handleVideoDataChange(this.props,e)},handleAutoplay:function(e){var t=n(e).autoplay;this.props.mediaAspect.shouldPlay(e.id)&&t&&e.isPlayingAllowed&&this.playMedia()},handleVideoDataChange:function(t,i){var o=n(i),s=n(t);o.videoId!==s.videoId||e.includes(i.renderParts.media.video,"video")&&!e.includes(t.renderParts.media.video,"video")?(this.unregisterPlayer(t),this.registerPlayer(i)):o.autoplay!==s.autoplay&&t.isPlayingAllowed&&(o.autoplay?this.playMedia():this.pauseMedia())},registerPlayer:function(t){var i=n(t);if("WixVideo"===e.get(i,"type")&&e.includes(t.renderParts.media.video,"video")){var o={playerType:"mediaContainer",mediaData:i,services:{viewport:{callback:this.onViewportChange,eventTypes:["in","out"]},visibility:{callback:this.onVisibilityChange},fileAvailability:{callback:this.onFileAvailability,mediaQuality:t.mediaQuality,videoPartTypes:["video"]}}};t.mediaAspect.registerPlayer(t.id,o)}},unregisterPlayer:function(e){e.mediaAspect.unregisterPlayer(e.id)},updatePlayerState:function(e,t){e.mediaAspect.updatePlayerState(e.id,t)},updateQualityState:function(e,t,i){e.mediaAspect.updateQualityState(t,i)},onMediaChange:function(e){var t=this.props.mediaAspect.getData(this.props.id)||{},i=this.mediaStateChangeLogic(e,t);e.type===r.eventTypes.LOAD&&i.playbackState===r.playbackTypes.READY&&this.handleAutoplay(this.props),this.updatePlayerState(this.props,i)},mediaStateChangeLogic:function(t,i){var o={},s=a(n(this.props),this.props.compProp),p=t.playbackState===r.playbackTypes.SEEKING_ENDED||t.playbackState===r.playbackTypes.SEEKING,l=t.playbackState===r.playbackTypes.PAUSED&&s.loop&&i.currentTime>=i.duration;switch(t.type){case r.eventTypes.MOUNT:o={playbackState:t.playbackState,volume:1,fullscreen:!1,muted:!0,currentTime:0,progress:0};break;case r.eventTypes.LOAD:o=e.omit(t,["type","originalEventType"]);break;case r.eventTypes.PLAYSTATE:switch(t.playbackState){case r.playbackTypes.PLAY_ENDED:s.loop?this.playMedia(0):(this.pauseMedia(),o={playbackState:r.playbackTypes.PLAY_ENDED});break;default:o=p||l?{playbackState:i.playbackState}:{playbackState:t.playbackState}}break;case r.eventTypes.ERROR:break;case r.eventTypes.TIME_UPDATE:o={currentTime:t.currentTime};break;case r.eventTypes.PROGRESS:o={progress:t.progress};break;case r.eventTypes.VOLUME:o={volume:t.volume,muted:t.muted};break;case r.eventTypes.RATE:}return o},onViewportChange:function(e){if(this.props.isPlayingAllowed&&!e.isFixed){var t=this.props.mediaAspect.getData(this.props.id);e.in?t.previousPlaybackState===r.playbackTypes.PLAYING?(this.updatePlayerState(this.props,{previousPlaybackState:""}),this.playMedia()):t.playbackState!==r.playbackTypes.IDLE&&t.playbackState!==r.playbackTypes.READY||this.handleAutoplay(this.props):e.out&&(t.playbackState===r.playbackTypes.PLAYING?(this.updatePlayerState(this.props,{previousPlaybackState:r.playbackTypes.PLAYING}),this.pauseMedia()):t.previousPlaybackState||this.updatePlayerState(this.props,{previousPlaybackState:t.playbackState}))}},onVisibilityChange:function(e){if(this.props.isPlayingAllowed){var t=this.props.mediaAspect.getData(this.props.id);e.hidden?e.hidden&&(t.playbackState===r.playbackTypes.PLAYING?(this.updatePlayerState(this.props,{previousPlaybackState:r.playbackTypes.PLAYING}),this.pauseMedia()):t.previousPlaybackState||this.updatePlayerState(this.props,{previousPlaybackState:t.playbackState})):t.previousPlaybackState===r.playbackTypes.PLAYING?(this.updatePlayerState(this.props,{previousPlaybackState:""}),this.playMedia()):t.playbackState!==r.playbackTypes.IDLE&&t.playbackState!==r.playbackTypes.READY||this.handleAutoplay(this.props)}},onFileAvailability:function(e){this.updateQualityState(this.props,e.videoId,{mediaQuality:e.mediaQuality,mediaReadyState:e.readyState}),this.updatePlayerState(this.props,{mediaQuality:e.mediaQuality,mediaReadyState:e.readyState})},setMediaAPI:function(e){this.mediaAPI=e},mediaCommandsLogic:function(t){var i=e.tail(arguments),o=e.isEmpty(i)?void 0:i;this.mediaAPI&&this.mediaAPI(t,o)},playMedia:function(){this.mediaCommandsLogic("play")},pauseMedia:function(){this.mediaCommandsLogic("pause")},stopMedia:function(){this.mediaCommandsLogic("stop")},createFillLayers:function(t){var i=e.assign({},this.props,t),o={skin:"skins.viewer.balata.balataBaseSkin",styleId:i.styleId+r.balataConsts.BALATA},s=i.isMobileView?"mobile":"desktop",p={ref:r.balataConsts.BALATA,id:i.id+r.balataConsts.BALATA,key:(i.isPlayingAllowed?"playback":"no-playback")+s,parentId:i.id,style:i.bgStyle||r.defaultStyle,compBehaviors:i.compStaticBehaviors,compProp:a(n(this.props),this.props.compProp),compDesign:i.compDesign,onClick:i.onClick,mediaQuality:i.mediaQuality,notifyMediaState:this.onMediaChange,setMediaAPI:this.setMediaAPI,isPlayingAllowed:i.isPlayingAllowed,enableVideo:i.isDesktopDevice&&!i.isMobileView,renderParts:i.renderParts};return this.createChildComponent(i.compData,"wysiwyg.viewer.components.background.Balata",o,p)}}}),define("components/common/mediaCommon/mediaLogic/mediaPlayerLogicMixin",["lodash","react","santaProps","coreUtils","components/components/bootstrap/balata/balata"],function(e,t,i,o,s){"use strict";function n(t){return e.get(t.compDesign,["background","mediaRef"],e.get(t.compData,["background","mediaRef"]))||{}}var a=o.mediaConsts;return{propTypes:e.defaults({id:i.Types.Component.id.isRequired,styleId:i.Types.Component.styleId.isRequired,compData:i.Types.Component.compData,compProp:i.Types.Component.compProp,compDesign:i.Types.Component.compDesign,compStaticBehaviors:i.Types.Component.compStaticBehaviors,compDynamicBehaviors:i.Types.Component.compDynamicBehaviors,bgStyle:t.PropTypes.object,onClick:t.PropTypes.func,mediaAspect:i.Types.SiteAspects.mediaAspect.isRequired,mediaQuality:i.Types.Media.mediaQuality,isPlayingAllowed:i.Types.RenderFlags.isPlayingAllowed.isRequired},i.santaTypesUtils.getSantaTypesByDefinition(s)),getInitialState:function(){return this.registerPlayer(this.props),this.mediaAPI=null,this.mediaQuality=this.props.mediaQuality,{}},componentWillReceiveProps:function(e){this.handleVideoDataChange(this.props,e)},handleVideoDataChange:function(e,t){var i=n(t),o=n(e);i.videoId!==o.videoId&&(this.mediaQuality=t.mediaQuality,this.unregisterPlayer(e),this.registerPlayer(t))},registerPlayer:function(t){var i=n(t);if("WixVideo"===e.get(i,"type")){var o={playerType:"mediaPlayer",mediaData:i,services:{fileAvailability:{callback:this.onFileAvailability,mediaQuality:t.mediaQuality,videoPartTypes:["video","storyboard"]}}};t.mediaAspect.registerPlayer(t.id,o)}},unregisterPlayer:function(e){e.mediaAspect.unregisterPlayer(e.id)},updatePlayerState:function(e,t){e.mediaAspect.updatePlayerState(e.id,t)},updateQualityState:function(e,t,i){e.mediaAspect.updateQualityState(t,i)},onMediaChange:function(e){var t=this.props.mediaAspect.getData(this.props.id),i=this.mediaStateChangeLogic(e,t);this.updatePlayerState(this.props,i)},mediaStateChangeLogic:function(t,i){var o={},s=i.playbackState===a.playbackTypes.PLAYING,n=i.playbackState===a.playbackTypes.SEEK_PLAYING||i.playbackState===a.playbackTypes.SEEK_PAUSED,r=i.currentTime>=i.duration,p=i.playbackState===a.playbackTypes.SEEK_PLAYING&&!r||i.playbackState===a.playbackTypes.SEEK_PLAYING&&r&&this.props.compProp.loop;switch(t.type){case a.eventTypes.MOUNT:o={playbackState:t.playbackState,volume:1,fullscreen:!1,muted:!1,currentTime:0,progress:0};break;case a.eventTypes.LOAD:o=e.omit(t,["type","originalEventType"]);break;case a.eventTypes.PLAYSTATE:switch(t.playbackState){case a.playbackTypes.SEEKING:n||(o={playbackState:s||i.playbackState===a.playbackTypes.PLAY_ENDED?a.playbackTypes.SEEK_PLAYING:a.playbackTypes.SEEK_PAUSED});break;case a.playbackTypes.SEEKING_ENDED:o=!p&&r?{playbackState:a.playbackTypes.PLAY_ENDED}:{playbackState:p?a.playbackTypes.PLAYING:a.playbackTypes.PAUSED},p?this.playMedia():this.pauseMedia();break;case a.playbackTypes.PLAY_ENDED:this.props.compProp.loop&&i.playbackState===a.playbackTypes.PLAYING?this.playMedia(0):r&&(o={playbackState:a.playbackTypes.PLAY_ENDED});break;case a.playbackTypes.PAUSED:s&&r?o={playbackState:a.playbackTypes.PLAYING}:n||(o={playbackState:t.playbackState});break;default:n||(o={playbackState:t.playbackState})}break;case a.eventTypes.ERROR:break;case a.eventTypes.TIME_UPDATE:o={currentTime:t.currentTime};break;case a.eventTypes.PROGRESS:o={progress:t.progress};break;case a.eventTypes.VOLUME:o={volume:t.volume,muted:t.muted};break;case a.eventTypes.RATE:}return o},onFileAvailability:function(e){switch(e.type){case"video":if(this.updateQualityState(this.props,e.videoId,{mediaQuality:e.mediaQuality,mediaReadyState:e.readyState}),this.updatePlayerState(this.props,{mediaQuality:e.mediaQuality,mediaReadyState:e.readyState}),e.mediaQuality){var t=this.props.mediaAspect.getData(this.props.id);t.playbackState!==a.playbackTypes.READY&&t.playbackState!==a.playbackTypes.IDLE||this.mediaCommandsLogic("setSrc",e.mediaQuality)}break;case"storyboard":this.updateQualityState(this.props,e.videoId,{storyboardQuality:e.mediaQuality,storyboardReadyState:e.readyState}),this.updatePlayerState(this.props,{storyboardQuality:e.mediaQuality,storyboardReadyState:e.readyState})}},setMediaAPI:function(e){this.mediaAPI=e},mediaCommandsLogic:function(t){if(this.mediaAPI){var i=this.props.mediaAspect.getData(this.props.id),o=e.tail(arguments),s=i.playbackState===a.playbackTypes.PLAYING,n=e.includes([a.playbackTypes.SEEK_PLAYING,a.playbackTypes.SEEK_PAUSED,a.playbackTypes.SEEKING],i.playbackState);switch(t){case"togglePlay":s?this.pauseMedia():this.playMedia();break;case"play":var r=e.head(o)||-1;i.playbackState===a.playbackTypes.PLAY_ENDED&&r<0&&(r=0),r>=0&&this.seekMedia(r),this.mediaAPI("play");break;case"pause":var p=e.head(o)||-1;this.mediaAPI("pause"),p>=0&&this.seekMedia(p);break;case"seekStart":if(n)break;this.updatePlayerState(this.props,{playbackState:s?a.playbackTypes.SEEK_PLAYING:a.playbackTypes.SEEK_PAUSED}),s&&this.pauseMedia();break;case"seekEnd":var l=e.head(o);this.seekMedia(l);break;default:this.mediaAPI(t,o)}}},togglePlayMedia:function(){this.mediaCommandsLogic("togglePlay")},playMedia:function(e){this.mediaCommandsLogic("play",e)},pauseMedia:function(e){this.mediaCommandsLogic("pause",e)},stopMedia:function(){this.mediaCommandsLogic("stop")},setMediaVolume:function(e){this.mediaCommandsLogic("setVolume",e)},muteMedia:function(){this.mediaCommandsLogic("mute")},unMuteMedia:function(){this.mediaCommandsLogic("unMute")},seekMedia:function(e){this.mediaCommandsLogic("seek",e)},startSeekMedia:function(e){this.mediaCommandsLogic("seekStart",e)},endSeekMedia:function(e){this.mediaCommandsLogic("seekEnd",e)},createFillLayers:function(t){var i=e.assign({},this.props,t),o={skin:"skins.viewer.balata.balataBaseSkin",styleId:i.styleId+a.balataConsts.BALATA},s={ref:a.balataConsts.BALATA,id:i.id+a.balataConsts.BALATA,parentId:i.id,style:i.bgStyle||a.defaultStyle,compBehaviors:i.compStaticBehaviors,compProp:i.compProp,compDesign:i.compDesign,onClick:i.onClick,mediaQuality:this.mediaQuality,notifyMediaState:this.onMediaChange,setMediaAPI:this.setMediaAPI,enableVideo:!0,isPlayingAllowed:this.props.isPlayingAllowed,playerInteraction:i.playerInteraction||i.compProps.playerInteraction};return this.createChildComponent(i.compData,"wysiwyg.viewer.components.background.Balata",o,s)}}}),define("components/common/mediaCommon/mediaCommon",["lodash","coreUtils","components/components/bootstrap/balata/balata","components/common/mediaCommon/mediaLogic/fillLogicMixin","components/common/mediaCommon/mediaLogic/mediaPlayerLogicMixin"],function(e,t,i,o,s){"use strict";var n=t.mediaConsts;return{balata:i,defaultMediaStyle:n.defaultMediaStyle,popupMediaStyle:n.popupMediaStyle,mediaLogicMixins:{fill:o,mediaPlayer:s},mediaBehaviors:{fill:{play:{methodName:"playMedia",params:[{name:"time",defaultValue:-1}]},pause:{methodName:"pauseMedia",params:[{name:"time",defaultValue:-1}]},stop:{methodName:"stopMedia"}},mediaPlayer:{togglePlay:{methodName:"togglePlayMedia"},play:{methodName:"playMedia",params:[{name:"time",defaultValue:-1}]},pause:{methodName:"pauseMedia",params:[{name:"time",defaultValue:-1}]},stop:{methodName:"stopMedia"},setVolume:{methodName:"setMediaVolume",params:["volume"]},mute:{methodName:"muteMedia"},unMute:{methodName:"unMuteMedia"},seek:{methodName:"seekMedia",params:["time"]},seekStart:{methodName:"startSeekMedia"},seekEnd:{methodName:"endSeekMedia",params:["time"]},enterFullScreen:{methodName:"enterFullscreen"},exitFullScreen:{methodName:"exitFullscreen"}}}}}),define("components/core/svgShapeStylesCollector",["lodash","core","utils"],function(e,t,i){"use strict";function o(t,o,s,n){var a=e.get(t,"styleItem.id")||e.get(t,"structure.styleId");a&&(n[a]=i.santaTypes.shortenStyleId(t.structure.skin));var r=e.get(t.structure,["modes","overrides"]);e.forEach(r,function(e){var s=e.styleId;s&&o[s]&&(n[s]=i.santaTypes.shortenStyleId(t.structure.skin))})}t.styleCollector.registerClassBasedStyleCollector("wysiwyg.viewer.components.svgshape.SvgShape",o),t.styleCollector.registerClassBasedStyleCollector("wysiwyg.viewer.components.PopupCloseIconButton",o)}),define("components/core/dialogsStylesCollector",["lodash","core","utils"],function(e,t,i){"use strict";function o(e,t,o,s){s.b1=i.santaTypes.shortenStyleId(e.structure.skin)}t.styleCollector.registerClassBasedStyleCollector("wysiwyg.viewer.components.dialogs.EnterPasswordDialog",o),t.styleCollector.registerClassBasedStyleCollector("wysiwyg.viewer.components.dialogs.NotificationDialog",o),t.styleCollector.registerClassBasedStyleCollector("wysiwyg.viewer.components.dialogs.siteMemberDialogs.MemberLoginDialog",o),t.styleCollector.registerClassBasedStyleCollector("wysiwyg.viewer.components.dialogs.siteMemberDialogs.RequestPasswordResetDialog",o),t.styleCollector.registerClassBasedStyleCollector("wysiwyg.viewer.components.dialogs.siteMemberDialogs.ResetPasswordDialog",o),t.styleCollector.registerClassBasedStyleCollector("wysiwyg.viewer.components.dialogs.siteMemberDialogs.SignUpDialog",o)}),define("components/core/appControllerStyleCollector",["lodash","core","utils"],function(e,t,i){"use strict";var o="platform.components.skins.controllerIconAndNameSkin";t.styleCollector.registerClassBasedStyleCollector("platform.components.AppController",function(e,t,s,n){n[i.santaTypes.shortenStyleId(o)]=o})}),define("components/behaviors/compBehaviorHandler",["lodash","coreUtils"],function(e,t){"use strict";var i=e.keyBy([t.constants.ACTION_TYPES.SYNC_VALIDATION_DATA,t.constants.ACTION_TYPES.SET_CUSTOM_VALIDITY,t.constants.ACTION_TYPES.UPDATE_VALIDITY_INDICATION]);return{handle:function(t,o,s){var n=o.getSiteAspect("behaviorsAspect");e.forEach(t,function(e){n.registerBehavior(e,s.callback)}),e.some(t,function(t){return!e.has(i,t.name)})&&o.forceUpdate()}}}),define("components/behaviors/compBehaviorsRegistrar",["core","components/behaviors/compBehaviorHandler"],function(e,t){"use strict";e.behaviorHandlersFactory.registerHandler("comp",t)}),define("components/behaviors/scrubUtils",["lodash"],function(e){"use strict";function t(e){return Math.max(Math.min(e,1),0)}function i(e,t){return{targetId:e,duration:1,delay:0,params:{compMeasures:t}}}function o(i,o,s,n){var a=e.isNaN(i.position.y)?0:i.position.y,r=e.isNaN(o.position.y)?0:o.position.y,p=Math.abs(r-a)/n;return t(s+("DOWN"===i.direction?1:-1)*p)}return{getComponentMeasure:function(e,t){return{height:e.measureMap.height[t],width:e.measureMap.width[t],top:e.measureMap.top[t],left:e.measureMap.left[t]}},scrubSequence:function(t,i,s){var n=t.progress(),a=o(i.scroll.current,i.scroll.previous,n,s.height);e.isFinite(a)&&a!==n&&t.progress(a)},createSequence:function(t,o,s){var n=t.targetId,a=e.get(t,["params","animations"],[]),r=o.sequence();return e.forEach(a,function(o){var a=e.defaultsDeep(o,i(t.targetId,s));r.add(n,a.name,a.duration,a.delay,a.params)}),r.execute({suppressReactRendering:!1,forgetSequenceOnComplete:!1,paused:!0})}}}),define("components/behaviors/scrubBehaviorHandler",["lodash","core","components/behaviors/scrubUtils"],function(e,t,i){"use strict";function o(e){return n.behaviorToSequenceId[s(e)]}var s=t.behaviorsService.behaviorUniqueIdentifier,n={behaviorToSequenceId:{},isEnabled:e.constant(!0),handle:function(t,a,r){var p=a.getSiteData();e.forEach(t,function(e){var t=a._site.getPageById(e.pageId),l=o(e),c=t.getSequence(l),d=i.getComponentMeasure(p,e.targetId);c?i.scrubSequence(c,r,d):(l=i.createSequence(e,t,d),n.behaviorToSequenceId[s(e)]=l)})},cancel:function(e,t){t._site.getPageById(e.pageId).stopSequence(o(e),0),delete n.behaviorToSequenceId[s(e)]}};return n}),define("components/behaviors/scrubBehaviorsRegistrar",["core","components/behaviors/scrubBehaviorHandler"],function(e,t){"use strict";e.behaviorHandlersFactory.registerHandler("scrub",t)}),define("components/behaviors/animationBehaviorHandler",["lodash","core"],function(e,t){"use strict";return{handle:function(i,o,s){var n=o.getSiteData(),a=o.getRuntimeDal(),r=s.group||s.action;if(n.isMobileView())e.defer(function(){e.get(s,"callback",e.noop)()});else{var p=e(i).filter(function(e){return!(a.getCompProps(e.targetId)||{}).isCollapsed}).map(function(t){return e.omit(e.defaultsDeep({},t,e.find(n.animations.viewerDefaults,{name:t.name})),"action")}).value();t.animationsService.playAnimations(o,r,p,!0,s.callback||e.noop)}},handlePreCondition:function(e,i){t.animationsService.hideElementsByAnimationType(i,[e])},cancelPreCondition:function(e,i){t.animationsService.revertHideElementsByAnimations(i,[e])},isEnabled:function(e,t){return!(t.getSiteData().isMobileDevice()||t.getSiteData().isMobileView())}}}),define("components/behaviors/animationBehaviorsRegistrar",["core","components/behaviors/animationBehaviorHandler"],function(e,t){"use strict";e.behaviorHandlersFactory.registerHandler("animation",t)}),define("components/components/bootstrap/masterPage/masterPage",["lodash","core","santaProps","react"],function(e,t,i,o){"use strict";var s={displayName:"WixMasterPage",propTypes:{componentViewMode:i.Types.RenderFlags.componentViewMode.isRequired,compBehaviors:i.Types.Component.compBehaviors,style:i.Types.Component.style.isRequired},render:function(){return o.createElement("div",this.props,this.props.children)}};return t.compRegistrar.register("mobile.core.components.MasterPage",s,!0),s}),define("components/components/bootstrap/wPhoto/santaTypes/wPhotoSantaTypes",["react","santaProps","siteUtils"],function(e,t,i){"use strict";function o(e,o,s){var n=t.Types.Link.linkRenderInfo.fetch(e,o),a=t.Types.Component.rootNavigationInfo.fetch(e,o);return i.linkRenderer.renderImageZoomLink(n,a,s,null,o.structure.propertyQuery,null)}function s(e,o,s){var n=t.Types.Link.linkRenderInfo.fetch(e,o),a=t.Types.Component.rootNavigationInfo.fetch(e,o);return i.linkRenderer.renderLink(s,n,a)}return{Link:t.createSantaType(e.PropTypes.object,function(e,i){var n=t.Types.Component.compData.fetch(e,i),a=t.Types.Component.compProp.fetch(e,i).onClickBehavior;return"zoomMode"===a?o(e,i,n):!n.link||"goToLink"!==a&&a?null:s(e,i,n.link)},!0)}}),define("components/components/bootstrap/wPhoto/wPhoto",["lodash","react","core","santaProps","components/components/bootstrap/wPhoto/santaTypes/wPhotoSantaTypes","coreUtils","image","zoomedImage"],function(e,t,i,o,s,n,a,r){"use strict";function p(i,o){var s={style:{}};return s.style.width=o.width,s.style.height=o.height,i?(s.style.cursor="pointer",e.assign(s,i)):s.parentConst=t.DOM.div,s}function l(e,t){return this.createChildComponent(this.props.compData,e,"img",t)}function c(e,t){return{id:e.id+"img",ref:"img",containerWidth:t.width,containerHeight:t.height,displayMode:k[e.compProp.displayMode]||e.compProp.displayMode,filterEffect:e.compProp.filterEffect,imageData:e.compData,addItemProp:e.addItemProp}}function d(t,i,o){var s;return this.state.isInZoom?(t.className=this.classSet({zoomedin:!0}),t.initialClickPosition=this.state.initialClickPosition,s=l.call(this,"core.components.ZoomedImage",t),i.onMouseLeave=y.bind(this),i.onMouseEnter=g.bind(this)):(t.className=this.classSet({zoomedout:!0}),s=l.call(this,"core.components.Image",t),i.onMouseLeave=e.noop,i.onMouseEnter=e.noop),e.assign(o,i),s}function u(e,t,i,o){var s=c(this.props,e),n={onClick:m.bind(this)};return!i||f(t,e)?l.call(this,"core.components.Image",s):d.call(this,s,n,o)}function h(t,i,o,s){var n={style:e.cloneDeep(t)};return n.style.width=i.width,n.style.height=i.height,n["data-exact-height"]=i.exactHeight,n["data-content-padding-horizontal"]=o.contentPaddingHorizontal,n["data-content-padding-vertical"]=o.contentPaddingVertical,n.title=s,n}function m(e){var t=this,i=this.state.isInZoom;this.registerReLayout(),i?this.refs.img.zoomOut(function(){t.setState({isInZoom:!i})}):this.setState({isInZoom:!i,initialClickPosition:{clientX:e.clientX,clientY:e.clientY}})}function y(e){var t=this;g.call(this),this.zoomTimer=setTimeout(function(){m.apply(t,[e])},S)}function g(){clearTimeout(this.zoomTimer)}function f(e,t){return e.width<t.width||e.height<t.height}function v(e,t){var i={},o=parseInt(e.contentPaddingLeft.value||0,10)+parseInt(t.contentPaddingLeft||0,10),s=parseInt(e.contentPaddingRight.value||0,10)+parseInt(t.contentPaddingRight||0,10),n=parseInt(e.contentPaddingTop.value||0,10)+parseInt(t.contentPaddingTop||0,10),a=parseInt(e.contentPaddingBottom.value||0,10)+parseInt(t.contentPaddingBottom||0,10);return i.contentPaddingHorizontal=o+s,i.contentPaddingVertical=n+a,i}function b(e,t){var i=e.width-t.contentPaddingHorizontal,o=e.height-t.contentPaddingVertical;return{width:i>0?i:16,height:o>0?o:16}}function P(e,t){return{width:e.width+t.contentPaddingHorizontal,height:e.height+t.contentPaddingVertical,exactHeight:(e.exactHeight||e.height)+t.contentPaddingVertical}}var T=i.compMixins,S=1200,k={fitWidthStrict:n.imageUtils.fittingTypes.LEGACY_FIT_WIDTH,fitHeightStrict:n.imageUtils.fittingTypes.LEGACY_FIT_HEIGHT},w={displayName:"WPhoto",propTypes:e.assign({id:o.Types.Component.id,compData:o.Types.Component.compData.isRequired,compProp:o.Types.Component.compProp.isRequired,structure:o.Types.Component.structure,link:s.Link},o.santaTypesUtils.getSantaTypesByDefinition(a),o.santaTypesUtils.getSantaTypesByDefinition(r)),statics:{useSantaTypes:!0},mixins:[T.skinBasedComp,T.skinInfo,T.animationsMixin],getInitialState:function(){return this.zoomTimer=null,{isInZoom:!1}},getSkinProperties:function(){var t=this.props.compProp.onClickBehavior,i=this.props.compProp.displayMode,o=e.pick(this.props.style,["width","height"]),s={width:this.props.compData.width,height:this.props.compData.height},a=v(this.getParams(["contentPaddingLeft","contentPaddingRight","contentPaddingBottom","contentPaddingTop"]),this.getSkinExports()),r=n.imageUtils.getContainerSize(b(o,a),s,k[i]||i),l=P(r,a),c=h(this.props.style,l,a,this.props.compData.title);return{"":c,img:u.call(this,r,s,"zoomAndPanMode"===t,c),link:p(this.props.link,r)}},getDefaultSkinName:function(){return"wysiwyg.viewer.skins.photo.DefaultPhoto"}},I=e.clone(w);return I.displayName="ClipArt",i.compRegistrar.register("wysiwyg.viewer.components.WPhoto",w,!0).register("wysiwyg.viewer.components.ClipArt",I,!0),w}),define("components/components/bootstrap/wRichText/santaTypes/wRichTextSantaTypes",["lodash","react","santaProps","siteUtils"],function(e,t,i,o){"use strict";return{Links:i.createSantaType(t.PropTypes.object,function(t,s){var n=i.Types.Component.compData.fetch(t,s);if(0===e.get(n,["linkList"],[]).length)return null;var a=i.Types.Link.linkRenderInfo.fetch(t,s),r=i.Types.Component.rootNavigationInfo.fetch(t,s);return e.transform(n.linkList,function(e,t){e["#"+t.id]=o.linkRenderer.renderLink(t,a,r)},{})},!0)}}),define("components/components/bootstrap/wRichText/wRichText",["lodash","santaProps","textCommon","core","components/components/bootstrap/wRichText/santaTypes/wRichTextSantaTypes"],function(e,t,i,o,s){"use strict";var n={displayName:"WRichText",propTypes:{compData:t.Types.Component.compData.isRequired,scale:t.Types.Component.scale,compProp:t.Types.Component.compProp,links:s.Links,colorsMap:t.Types.Theme.colorsMap.isRequired,fontsMap:t.Types.Fonts.fontsMap.isRequired,isMobileView:t.Types.isMobileView,shouldHideTextComponent:t.Types.RenderRealtimeConfig.shouldHideTextComponent,isPreviewMode:t.Types.isPreviewMode},statics:{useSantaTypes:!0},mixins:[i.textCompMixin],allowIframes:!1,fontGetter:function(e){var t=e.split("_")[1];return this.props.fontsMap[t]},colorGetter:function(e){var t=e.split("_")[1];return this.props.colorsMap[t]||e},convertCompDataTextToHTML:function(t){if(this._componentHtml){this._componentHtml=i.textComponentsUtils.convertDataQueryLinksIntoHtmlAnchors(this._componentHtml,t.links);var o=e.get(t,["compProp","overrideColor"]);o=o&&this.colorGetter(o),this._componentHtml=i.textComponentsUtils.mobileTextTransformIfNeeded(this._componentHtml,{brightness:e.get(t,"compProp.brightness"),overrideColor:o,isMobileView:t.isMobileView,scale:t.scale,fontGetter:this.fontGetter,colorGetter:this.colorGetter}),t.noAutoLinkGeneration||this.props.isPreviewMode||(this._componentHtml=i.textComponentsUtils.createImpliedLinks({htmlContent:this._componentHtml,isMobileView:this.props.isMobileView}))}}};return o.compRegistrar.register("wysiwyg.viewer.components.WRichText",n,!0),n}),define("components/components/bootstrap/screenWidthContainer/screenWidthContainer",["lodash","core","santaProps"],function(e,t,i){"use strict";var o={displayName:"WixScreenWidthContainer",mixins:[t.compMixins.skinBasedComp],propTypes:{isMobileView:i.Types.isMobileView},statics:{useSantaTypes:!0},getInitialState:function(){return{$displayDevice:this.props.isMobileView?"mobileView":""}},getSkinProperties:function(){return{inlineContent:{children:this.props.children}}}};return t.compRegistrar.register("wysiwyg.viewer.components.PagesContainer",o,!0).register("wysiwyg.viewer.components.ScreenWidthContainer",o,!0),o}),define("components/components/bootstrap/infoTip/utils/infoTipUtils",["zepto"],function(e){"use strict";function t(e){return e.offset()}function i(e,t){return{top:e.top-t.height,left:e.left-t.width/2,right:"auto"}}function o(t,i,o,s){var n,a=e(window.document.body).scrollTop();return t-a<0?((n=i.top+s.height)>o+a+s.height&&(n=i.top<0?i.top:a),n>0?n:0):t}function s(e,t,i,o){return t>o?"auto":e<0?i.left:e}function n(e,t,i){return e>i?t.left+t.width:e}function a(e,t,i){var a=window.innerWidth,r=window.innerHeight;return{top:o(e.top,t,r,i),left:s(e.left,e.right,t),right:n(e.right,t,a)}}function r(e,t){var i,o=0,s=0,n=t.offsetParent();return n&&(o=(i=n.offset()).top,s=i.left),{top:e.top-o,left:e.left-s,right:"auto"===e.right?e.right:e.right+s}}return{getPosition:function(o,s){var n,p,l;return o=e(o),s=e(s),l={width:s.width(),height:s.height()},n=t(o),p=i(n,l),p=a(p,n,l),p=r(p,s)}}}),define("components/components/bootstrap/infoTip/infoTip",["lodash","utils","core","santaProps","components/components/bootstrap/infoTip/utils/infoTipUtils","reactDOM"],function(e,t,i,o,s,n){"use strict";function a(){l.call(this)}function r(){this.setTimeoutNamed("closeTipByTimeout",a.bind(this),y)}function p(e,t){c.call(this,n.findDOMNode(t.source))}function l(){this.clearTimeoutNamed("openTip"),this.setState({$hidden:"hidden",runTimer:!0})}function c(e){this.setState({$hidden:"",isShown:!0,caller:e}),r.call(this)}function d(){var t,i;this.state.isShown&&(t=n.findDOMNode(this),i=s.getPosition(this.state.caller,t),m(t,e.pick(i,["top","left","right"])))}function u(t){return t&&e.isEmpty(t.description)}var h=i.compMixins,m=t.style.assignStyle,y=3e3,g={displayName:"InfoTip",mixins:[h.skinBasedComp,h.timeoutsMixin],propTypes:{compData:o.Types.Component.compData.isRequired},statics:{useSantaTypes:!0},onMouseEnter:function(){this._isMouseInside=!0},onMouseLeave:function(){this._isMouseInside=!1,l.call(this)},showToolTip:function(e,t){u(t.source.props.compData)||(this.clearTimeoutNamed("hideTipByClose"),this.setTimeoutNamed("openTip",function(){p.call(this,e,t)}.bind(this),500))},closeToolTip:function(){this.setTimeoutNamed("hideTipByClose",function(){this._isMouseInside||l.call(this)}.bind(this),150)},getSkinProperties:function(){return{content:{children:[this.props.compData.content]}}},componentDidUpdate:function(){d.call(this)},getInitialState:function(){return{$hidden:"hidden",isMouseInside:!1}}};return i.compRegistrar.register("wysiwyg.common.components.InfoTip",g),g}),define("components/components/bootstrap/pageGroup/pageGroup",["lodash","core","reactDOM","santaProps"],function(e,t,i,o){"use strict";function s(e,t,i,o){return function(){var s=t();switch(e){case"SlideHorizontal":return{siteWidth:i,width:s.width,ease:"Cubic.easeOut"};case"SlideVertical":var n=Math.max(s.height,o());return{screenHeight:s.height,height:n,reverse:!0,ease:"Cubic.easeInOut"};case"OutIn":return{sourceEase:"Strong.easeOut",destEase:"Strong.easeIn"};case"CrossFade":return{sourceEase:"Sine.easeInOut",destEase:"Quad.easeInOut"};default:return{}}}}function n(e,t,o){e.refs[t]?e.props.currentUrlPageId!==t&&e.refs[t].forceUpdate(function(){e.refs[o].updateVisibility(),i.findDOMNode(e.refs[t]).style.visibility="hidden"}):e.refs[o].updateVisibility()}var a=t.compMixins,r={outIn:"OutIn",crossfade:"CrossFade",shrinkfade:"CrossFade",swipeHorizontal:"SlideHorizontal",swipeHorizontalFullScreen:"SlideHorizontal",swipeVertical:"SlideVertical",swipeVerticalFullScreen:"SlideVertical",none:"NoTransition"},p={displayName:"PageGroup",mixins:[a.skinBasedComp,a.animationsMixin],propTypes:{getRenderedMasterPageHeight:o.Types.__DangerousSantaTypes.getRenderedMasterPageHeight.isRequired,getWindowSize:o.Types.__DangerousSantaTypes.getWindowSize.isRequired,actionsAspect:o.Types.SiteAspects.actionsAspect.isRequired,siteWidth:o.Types.siteWidth.isRequired,currentUrlPageId:o.Types.currentUrlPageId.isRequired,rootNavigationInfo:o.Types.Component.rootNavigationInfo.isRequired,compProp:o.Types.Component.compProp.isRequired,pagesToRender:o.Types.PageGroup.pagesToRender.isRequired,isExperimentOpen:o.Types.isExperimentOpen},statics:{useSantaTypes:!0},componentWillReceiveProps:function(e){var t,i,o,a=this.props.currentUrlPageId,p=e.currentUrlPageId,l=r[e.rootNavigationInfo.transition||this.props.compProp.transition]||r.none;a!==p&&(this.refs[a].clearAnimationsQueue(!0),t=this.getAnimationProperties(l).defaultDuration||0,o=s(l,this.props.getWindowSize,this.props.siteWidth,this.props.getRenderedMasterPageHeight),i={onComplete:function(){n(this,a,p),this.props.actionsAspect.handlePageTransitionComplete(a,p)}.bind(this)},this.props.actionsAspect.registerNextPageTransition(this,a,p,l,t,0,o,i))},createPage:function(e){var t=1===this.props.pagesToRender.length;return this.props.createPage(e,t)},getSkinProperties:function(){return{"":{children:e.map(this.props.pagesToRender,this.createPage)}}}};return t.compRegistrar.register("wysiwyg.viewer.components.PageGroup",p,!0),p}),define("components/components/bootstrap/headerContainer/headerContainer",["lodash","core","containerCommon","santaProps"],function(e,t,i,o){"use strict";var s=t.compMixins,n=i.mixins.fixedPositionContainerMixin,a={displayName:"HeaderContainer",mixins:[s.skinBasedComp,n],propTypes:{style:o.Types.Component.style.isRequired},statics:{useSantaTypes:!0},getSkinProperties:function(){return{"":{tagName:"header",style:this.getRootStyle(this.props.style)},inlineContent:{children:this.props.children}}}};return t.compRegistrar.register("wysiwyg.viewer.components.HeaderContainer",a,!0),a}),define("components/components/bootstrap/footerContainer/footerContainer",["lodash","core","containerCommon"],function(e,t,i){"use strict";var o=t.compMixins,s=i.mixins.fixedPositionContainerMixin,n={displayName:"FooterContainer",mixins:[o.skinBasedComp,s],statics:{useSantaTypes:!0},getSkinProperties:function(){return{"":{tagName:"footer",style:this.getRootStyle(this.props.style),className:this.classSet({footer:!0})},inlineContent:{children:this.props.children}}}};return t.compRegistrar.register("wysiwyg.viewer.components.FooterContainer",n,!0),n}),define("components/components/bootstrap/video/video",["zepto","lodash","core","react","utils","reactDOM","santaProps"],function(e,t,i,o,s,n,a){"use strict";function r(e,t,i){if("100%"===i)return"100%";var o=l(),s=e?o[e].hMinSize:0;return"YOUTUBE"===e&&"always_show"===t&&(s+=20),Math.max(i,s)}function p(e,t){if("100%"===t)return"100%";var i=l(),o=e?i[e].wMinSize:0;return Math.max(t,o)}function l(){return{YOUTUBE:{url:t.template("//www.youtube.com/embed/${videoId}?"),getParams:c,hMinSize:200,wMinSize:200,title:"External YouTube"},VIMEO:{url:t.template("//player.vimeo.com/video/${videoId}?"),getParams:u,hMinSize:100,wMinSize:100,title:"External Vimeo"},DAILYMOTION:{url:t.template("//www.dailymotion.com/embed/video/${videoId}?"),getParams:h,hMinSize:100,wMinSize:100,title:"External Daily Motion"},FACEBOOK:{url:t.template("//www.facebook.com/plugins/video.php?href=https://www.facebook.com/${videoId}&"),getParams:d,hMinSize:100,wMinSize:100,title:"External Facebook"}}}function c(e,t,i){var o=e.showControls,s=e.autoplay&&!0,n=e.enablejsapi||0,a=e.lightTheme,r=e.loop,p=e.showinfo,l=t.videoId||"";return{wmode:"transparent",autoplay:s&&i?"1":"0",theme:a?"light":"dark",controls:"always_hide"!==o?"1":"0",autohide:"temp_show"===o?"1":"0",loop:r?"1":"0",showinfo:p?"1":"0",rel:"0",playlist:!!r&&l,enablejsapi:n}}function d(e,t,i,o){return{autoplay:e.autoplay&&i,width:o.width,height:o.height}}function u(e,t,i){return{autoplay:e.autoplay&&i,loop:e.loop,byline:e.showinfo,portrait:e.showinfo,title:e.showinfo}}function h(e,t,i){return{autoplay:e.autoplay&&i,"ui-start-screen-info":e.showinfo?"1":"0",controls:"temp_show"===e.showControls?"1":"0","sharing-enable":"0","ui-logo":"0"}}function m(e,i,o,s){var n=e.videoId,a=e.videoType;if(!a||!n)return"";var r=l()[a],p=r.getParams(i,e,o,s);return r.url({videoId:n})+t.map(p,function(e,t){return t+"="+e}).join("&")}function y(e,t,i){return{width:p(e,i.width),height:r(e,t,i.height)}}function g(e){return e?l()[e].title:""}var f={displayName:"Video",mixins:[i.compMixins.skinBasedComp],statics:{useSantaTypes:!0},propTypes:{isPlayingAllowed:a.Types.RenderFlags.isPlayingAllowed.isRequired,compData:a.Types.Component.compData.isRequired,compProp:a.Types.Component.compProp.isRequired,style:a.Types.Component.style.isRequired},componentWillMount:function(){this.canPlayVideo=this.props.isPlayingAllowed},componentDidUpdate:function(){if(this.canPlayVideo!==this.props.isPlayingAllowed){this.canPlayVideo=this.props.isPlayingAllowed;var t=e(n.findDOMNode(this.refs.videoFrame)).find("iframe")[0],i=y(this.props.compData.videoType,this.props.compProp.showControls,this.props.style);t.src="",t.src=m(this.props.compData,this.props.compProp,this.props.isPlayingAllowed,i)}},getSkinProperties:function(){var e=y(this.props.compData.videoType,this.props.compProp.showControls,this.props.style),t=m(this.props.compData,this.props.compProp,this.props.isPlayingAllowed,e),i=g(this.props.compData.videoType),n={height:"100%",width:"100%",allowFullScreen:!0,frameBorder:"0",title:i,"aria-label":i};return s.validationUtils.isValidUrl(t)&&(n["data-src"]=t),this.props.addItemProp&&(n.itemProp="image"),{"":{style:{height:e.height,width:e.width}},videoFrame:{children:o.DOM.iframe(n)},preview:{style:{display:"none"}}}}};return i.compRegistrar.register("wysiwyg.viewer.components.Video",f,!0),f}),define("components/components/bootstrap/wixSkinOnly/wixSkinOnly",["core"],function(e){"use strict";var t={displayName:"WixSkinOnly",mixins:[e.compMixins.skinBasedComp],statics:{useSantaTypes:!0},getSkinProperties:function(){return{}}};return e.compRegistrar.register("wysiwyg.viewer.components.FiveGridLine",t,!0).register("wysiwyg.viewer.components.VerticalLine",t,!0).register("wysiwyg.common.components.anchor.viewer.Anchor",t,!0),t}),define("components/components/bootstrap/textInput/textInput",["lodash","core","santaProps","textCommon"],function(e,t,i,o){"use strict";function s(){var t=this.getFontSize();if(this.props.isMobileView){var i=e.max([13,Number(t.fontSize.replace("px",""))]);t.fontSize=i+"px"}return t}var n={displayName:"TextInput",mixins:[o.baseTextInput,o.textScaleMixin,t.compMixins.inputFocusMixin],propTypes:{compProp:i.Types.Component.compProp.isRequired,isMobileView:i.Types.isMobileView},statics:{useSantaTypes:!0,behaviors:e.assign({},o.baseTextInput.BASE_TEXT_BEHAVIORS,t.compMixins.inputFocusMixin.INPUT_FOCUS_BEHAVIORS)},focus:function(){this.refs.input.focus()},blur:function(){this.refs.input.blur()},getSkinProperties:function(){var t={"with-validation-indication":this.shouldShowValidityIndication()};t[this.props.compProp.textAlignment+"-direction"]=!0;var i=this.getBaseTextInputSkinProperties();i[""]={className:this.classSet(t),"data-disabled":!!this.props.compProp.isDisabled,"data-preview":e.isFunction(this.getComponentPreviewState)&&this.getComponentPreviewState()};var o="padding"+e.capitalize(this.props.compProp.textAlignment);return i.input=e.merge({style:s.call(this)},i.input,{"data-preview":e.isFunction(this.getComponentPreviewState)&&this.getComponentPreviewState(),className:"has-custom-focus"}),i.input.style[o]=this.props.compProp.textPadding,i}};return t.compRegistrar.register("wysiwyg.viewer.components.inputs.TextInput",n,!0),n}),define("components/components/bootstrap/sliderGallery/sliderGallery",["lodash","react","reactDOM","coreUtils","siteUtils","core","skins","santaProps","galleriesCommon","displayer"],function(e,t,i,o,s,n,a,r,p,l){"use strict";function c(e,t,i){this.state.currentIndex!==e&&(this.props.onImageSelected&&(t.type="imageSelected",t.payload={itemIndex:e,imageData:this.props.compData.items[e]},this.props.onImageSelected(t,i)),this.setState({currentIndex:e}))}function d(e,t){return e.dimensions?e.dimensions[t]:parseFloat(e.style[t])}function u(t,i){var o=i.props.selectedItemIndex||0;return{currentIndex:e.get(t,["currentIndex"],o)}}var h=n.compMixins,m=p.utils.galleriesHelperFunctions,y=o.matrix.scalingCalculations,g={displayName:"SliderGallery",statics:{useSantaTypes:!0,behaviors:{nextSlide:{methodName:"next"},prevSlide:{methodName:"prev"}}},mixins:[h.skinBasedComp,h.skinInfo,h.animationsMixin,h.timeoutsMixin,h.compStateMixin(u)],propTypes:e.assign({isExperimentOpen:r.Types.isExperimentOpen,id:r.Types.Component.id.isRequired,rootId:r.Types.Component.rootId.isRequired,compData:r.Types.Component.compData.isRequired,compProp:r.Types.Component.compData.isRequired,skin:r.Types.Component.skin.isRequired,style:r.Types.Component.style.isRequired,dimensions:r.Types.Component.dimensions,isMobileView:r.Types.isMobileView,isMobileDevice:r.Types.Device.isMobileDevice,isTabletDevice:r.Types.Device.isTabletDevice,windowTouchEventsAspect:r.Types.SiteAspects.windowTouchEvents.isRequired,getSliderGalleryMeasures:r.Types.__DangerousSantaTypes.getSliderGalleryMeasures,onImageSelected:t.PropTypes.func},r.santaTypesUtils.getSantaTypesByDefinition(l)),_currentOffset:null,_motion:!1,_firstChild:null,getInitialState:function(){return this.props.windowTouchEventsAspect.registerToWindowTouchEvent("touchStart",this),e.assign(u(null,{props:this.props.compProp}),{$mobile:this.props.isMobileDevice||this.props.isTabletDevice?"mobile":"notMobile",$displayDevice:this.props.isMobileView?"mobileView":"desktopView"})},componentWillUnmount:function(){this.props.windowTouchEventsAspect.unregisterFromWindowTouchEvent("touchStart",this)},getSkinProperties:function(){this.gap=e.isNumber(this.props.compProp.margin)?this.props.compProp.margin:20,this.contentOverflow=!1;var t=a.skinsMap.get(this.props.skin,this.props.isExperimentOpen),i=t.exports&&t.exports.bottomGap||0,o=Math.abs(this.getFromExports("itemContainerAdditionalHeight")),s=this.populate(i,o),n=Math.abs(this.getFromExports("itemContainerTotalOffset")),r=d(this.props,"width")-n;return this.itemsHolderWidth>r&&(this.contentOverflow=!0,s=this.populate(i,o)),{imageItem:{},images:{children:s,"data-gallery-id":this.props.id},swipeLeftHitArea:{onMouseEnter:this.prev,onMouseLeave:this._stopMovement,onTouchStart:this.prev,"data-gallery-id":this.props.id},swipeRightHitArea:{onMouseEnter:this.next,onMouseLeave:this._stopMovement,onTouchStart:this.next,"data-gallery-id":this.props.id},"":{onSwipeLeft:this.next,onSwipeRight:this.prev,"data-height-diff":m.getSkinHeightDiff(this.props.skin),"data-width-diff":m.getSkinWidthDiff(this.props.skin),"data-bottom-gap":i,"data-additional-height":o}}},getChildrenData:function(){var e=this.props.compData.items;return this.props.compProp.loop&&this.contentOverflow?e.concat(e):e},populate:function(t,i){var o=this.props.compProp,s=this.props.compData;return this.itemsHolderWidth=0,this.getChildrenData().map(function(n,r){var p=n,l=this.getSkinExports().imageItem.skin,u=this.getParams(["topPadding","imgHeightDiff"],l),h=a.skinsMap.get(l,this.props.isExperimentOpen),g=m.getDisplayerHeightDiff(h,u,this.state.$displayDevice),f=m.getDisplayerWidthDiff(h,this.state.$displayDevice),v=Math.floor(d(this.props,"height")+i),b=this.props.compData.items.length,P=y.getSizeAfterScaling({itemHeight:v,itemWidth:Math.floor(v*(this.props.compProp.aspectRatio||1)),displayerData:p,imageMode:this.props.compProp.imageMode,heightDiff:g,widthDiff:f,bottomGap:t});return this.itemsHolderWidth=this.itemsHolderWidth+P.imageWrapperSize.imageWrapperWidth+this.gap,this.createChildComponent(p,"wysiwyg.viewer.components.Displayer","imageItem",{rootId:this.props.rootId,currentUrlPageId:this.props.currentUrlPageId,rootNavigationInfo:this.props.rootNavigationInfo,galleryDataId:s.id,imageWrapperSize:P.imageWrapperSize,style:{display:"inline-block",margin:"0 "+(e.isNumber(o.margin)?o.margin:20)+"px 0 0",height:P.displayerSize.height,width:P.displayerSize.width},isSelected:this.state.currentIndex===r,onClick:c.bind(this,r),displayerDataQuery:n,galleryId:this.props.id,heightDiff:g,widthDiff:f,bottomGap:t,imageIndex:r%b,key:this.props.id+p.id+"_"+r,ref:"displayer"+r,id:this.props.id+"displayer"+r})},this)},prev:function(){this._move(!0)},next:function(){this._move(!1)},_move:function(e){var t=this.props.compProp.maxSpeed||.05;this.slide(e,t,this.props.compProp.loop)},_stopMovement:function(){this._sequenceId&&(this.easeStopSequence(this._sequenceId,1),this._sequenceId=null)},slide:function(e,t,o){if(this.contentOverflow){var n=this.props.getSliderGalleryMeasures(this.props.id),a=n.imagesWidth-(this.props.compProp.margin||0),r=n.itemsContainerWidth,p=i.findDOMNode(this.refs.images).offsetLeft,l=o?-a/2:r-a;this._stopMovement();var c=this.sequence(),d=Math.abs(l)/(60*t),u=d*(e?Math.abs(p/l):1-Math.abs(p/l));c.add("images","BasePosition",u,0,{from:{left:p},to:{left:e?0:l},ease:"Linear.easeNone"}),o&&c.add("images","BasePosition",d,0,{from:{left:e?l:0},to:{left:e?0:l},repeat:o?-1:0,immediateRender:!1,ease:"Linear.easeNone"}),c.onCompleteAll(function(){var e=this.props.compData.items[this.state.currentIndex];this.handleAction(s.constants.ACTION_TYPES.IMAGE_CHANGED,{item:e,imageIndex:this.state.currentIndex})}.bind(this)),this._sequenceId=c.execute({paused:!0}),this.easeStartSequence(this._sequenceId,1),"mobile"===this.state.$mobile&&(this.clearTimeoutNamed(this.props.id),this._nextStopTimeout=this.setTimeoutNamed(this.props.id,function(){this._stopMovement()}.bind(this),2e3))}},onWindowTouchStart:function(e){(e.target.getAttribute("data-gallery-id")||e.target.parentNode.getAttribute("data-gallery-id"))!==this.props.id&&this._stopMovement()}};return n.compRegistrar.register("wysiwyg.viewer.components.SliderGallery",g,!0),g}),define("components/components/bootstrap/paginatedGridGallery/paginatedGridGallery",["lodash","react","santaProps","core","utils","siteUtils","coreUtils","galleriesCommon","image"],function(e,t,i,o,s,n,a,r,p){"use strict";function l(e,t,i,o,s,n){var a=S.getItemWidth(e.margin,e.numCols,t,k.getSkinWidthDiff(s)),r=S.getItemHeight(e.margin,i,o,k.getSkinHeightDiff(s)),p=t-k.getSkinWidthDiff(s)+e.margin,l=i-k.getSkinHeightDiff(s)+e.margin;return{width:"Shrink"===n?a:p,height:"Shrink"===n?r:l}}function c(e,t){return{visibility:"visible",position:"absolute",cursor:"pointer",padding:0,left:parseInt(e.props.style.left,10)+k.getSkinWidthDiff(t)/2,top:parseInt(e.props.style.top,10),width:parseInt(e.props.containerWidth,10),height:parseInt(e.props.containerHeight,10)}}function d(t,i){var o=Math.max(t.length,i.length);e.times(o,function(e){t[e]||(t[e]="emptyDivToFillMatrix"),i[e]||(i[e]="emptyDivToFillMatrix")})}function u(e,t){var i=t;return i||(i=!0===e?"zoomMode":"disabled"),i}function h(i,o){var a=e.defaults({href:o.href||"#",style:e.assign({height:"100%",display:"block",width:"100%",position:"absolute",top:"0px",left:"0px",backgroundColor:"#ffffff",filter:"alpha(opacity=0)",opacity:"0",cursor:o.cursor},s.style.prefix({userSelect:"none",userDrag:"none",userModify:"read-only"}))},o);return o.href||(a.onClick=function(t){this.props.handleAction({type:"comp",name:n.constants.ACTION_TYPES.ITEM_CLICKED,sourceId:this.props.id,pageId:this.props.rootId},function(e,t){return{item:e,timeStamp:s.performance.now(),imageIndex:t,name:n.constants.ACTION_TYPES.ITEM_CLICKED}}(i,e.get(this.state,"currentIndex"))),t.preventDefault(),t.stopPropagation()}.bind(this)),t.DOM.a(a)}function m(t,i,o,s,n,a,r,p,l){var c,d={},h="Go to link",m="pointer",y=u(i.expandEnabled,i.galleryImageOnClickAction);return t.link&&(c=s(a,p,o)),i.goToLinkText&&(h=i.goToLinkText),"zoomMode"===y?d=n(p,o,t,r,void 0,l):c&&"goToLink"===y?d=c:m="default",e.assign(d,{linkData:c,goToLinkText:h,cursor:m,clickAction:y}),d}function y(e){return e?e.title:""}function g(e){return e?e.description:""}function f(t){return{currentIndex:e.get(t,"currentIndex",0),isPlaying:"autoplayOn"===e.get(t,"$slideshow","autoplayOff")}}var v={numCols:3,maxRows:3,margin:0,transition:"seq_crossFade_All",transDuration:1,autoplayInterval:3,autoplay:!1,showAutoplay:!0,showNavigation:!0,showCounter:!0},b=o.compMixins,P=o.componentUtils,T=s.linkRenderer,S=a.matrix.calculations,k=r.utils.galleriesHelperFunctions,w=P.galleryPagingCalculations,I=P.matrixAnimationManipulation,M={displayName:"PaginatedGridGallery",mixins:[b.skinBasedComp,r.mixins.galleryAutoPlayMixin,b.animationsMixin,b.timeoutsMixin,b.compStateMixin(f)],propTypes:e.assign({compProp:i.Types.Component.compProp.isRequired,compData:i.Types.Component.compData.isRequired,id:i.Types.Component.id.isRequired,skin:i.Types.Component.skin.isRequired,style:i.Types.Component.style.isRequired,linkRenderInfo:i.Types.Link.linkRenderInfo.isRequired,rootNavigationInfo:i.Types.Component.rootNavigationInfo.isRequired,dimensions:i.Types.Component.dimensions,isZoomOpened:i.Types.isZoomOpened.isRequired,windowTouchEventsAspect:i.Types.SiteAspects.windowTouchEvents.isRequired,isMobileView:i.Types.isMobileView,isMobileDevice:i.Types.Device.isMobileDevice,isTabletDevice:i.Types.Device.isTabletDevice,isPlayingAllowed:i.Types.RenderFlags.isPlayingAllowed,getPaginatedGridGalleryMeasures:i.Types.__DangerousSantaTypes.getPaginatedGridGalleryMeasures,onAnimationCompleteCallback:t.PropTypes.func,createGalleryItem:t.PropTypes.func,getItemRef:t.PropTypes.func,registerReLayout:t.PropTypes.func,compActions:i.Types.Component.compActions.isRequired},i.santaTypesUtils.getSantaTypesByDefinition(p)),statics:{useSantaTypes:!0,behaviors:{nextSlide:{methodName:"next"},prevSlide:{methodName:"prev"}}},getInitialState:function(){return this.props.windowTouchEventsAspect.registerToWindowTouchEvent("touchStart",this),this.isAnimating=!1,e.assign(f(),{hoveredImage:null,$itemSelection:"idle",$mobile:this.props.isMobileDevice||this.props.isTabletDevice?"mobile":"notMobile",$displayDevice:this.props.isMobileView?"mobileView":"desktopView",$animationInProcess:null,$touchRollOverSupport:"touchRollOut"})},componentWillReceiveProps:function(e){var t=!1,i={$mobile:e.isMobileDevice||e.isTabletDevice?"mobile":"notMobile",$displayDevice:e.isMobileView?"mobileView":"desktopView"};if(this.props.compProp.autoplay!==e.compProp.autoplay){var o=e.compProp.autoplay&&!this.props.isZoomOpened&&this.props.isPlayingAllowed?"autoplayOn":"autoplayOff";t=!0,i.shouldAutoPlay=e.compProp.autoplay,i.$slideshow=o}this.setState(i,function(){t&&(this.updateAutoplayState(),this.handleAction(i.$slideshow))}.bind(this))},componentDidMount:function(){this.updateAutoplayState()},componentWillUnmount:function(){this.props.windowTouchEventsAspect.unregisterFromWindowTouchEvent("touchStart",this)},getButtonVisibility:function(e,t){return!1===this.props.compProp.showNavigation||this.state.currentIndex===e&&this.state.currentIndex===t||this.props.compProp.isHidden?"hidden":"visible"},getSkinProperties:function(){var t=e.defaults(this.props.compProp,v),i=this.props.compData,o=w.getPageItems(i.items,this.state.currentIndex,t.numCols,t.maxRows),s=this.state.hoveredImage?this.state.hoveredImage.props.compData:null,n=this.state.hoveredImage?m(s,t,this.props.rootNavigationInfo,T.renderLink,T.renderImageZoomLink,s.link,i.id,this.props.linkRenderInfo,this.props.id):{},a=w.getNextPageItemIndex(this.state.currentIndex,t.numCols,t.maxRows,i.items.length),r=w.getPrevPageItemIndex(this.state.currentIndex,t.numCols,t.maxRows,i.items.length),p=w.getPageItems(i.items,a,t.numCols,t.maxRows),l=w.getPageItems(i.items,r,t.numCols,t.maxRows),d=this.getButtonVisibility(a,r),u=!this.props.compProp.isHidden&&this.props.compProp.showCounter&&o.length>0?"visible":"hidden",f=this.classSet({"show-counter":"hidden"!==d||"hidden"!==u});return{"":{"data-height-diff":k.getSkinHeightDiff(this.props.skin),"data-width-diff":k.getSkinWidthDiff(this.props.skin),onMouseLeave:function(e,t){this.onRollOut(e,t,!0)}.bind(this),style:{overflow:"hidden"}},itemsContainer:{children:this.createDisplayedItems(o,p,l,a,r),"data-gallery-id":this.props.id,className:f,style:{position:"relative",overflow:"hidden",width:this.props.style.width-k.getSkinWidthDiff(this.props.skin),height:this.props.style.height-k.getSkinHeightDiff(this.props.skin)}},buttonPrev:{onClick:function(e){e&&e.stopPropagation(),this.prev()}.bind(this),"data-gallery-id":this.props.id,style:{visibility:d}},buttonNext:{onClick:function(e){e&&e.stopPropagation(),this.next()}.bind(this),"data-gallery-id":this.props.id,style:{visibility:d}},counter:{children:w.getCounterText(this.state.currentIndex,t.numCols,t.maxRows,i.items.length),style:{visibility:u},"data-gallery-id":this.props.id},autoplay:{onClick:this.toggleAutoPlay,"data-gallery-id":this.props.id,style:{cursor:"pointer",visibility:this.shouldShowAutoPlay()?"visible":"hidden"}},rolloverHolder:{style:this.state.hoveredImage?c(this.state.hoveredImage,this.props.skin):{visibility:"hidden",cursor:"pointer"},"data-gallery-id":this.props.id,addChildBefore:[h.call(this,s,n),"link"]},title:{children:this.state.hoveredImage?y(s):"","data-gallery-id":this.props.id},description:{children:this.state.hoveredImage?g(s):"","data-gallery-id":this.props.id},link:n.linkData&&e.merge(n.linkData,{children:n.goToLinkText,"data-gallery-id":this.props.id,refInParent:"link",style:{display:"goToLink"!==n.clickAction&&n.linkData?"block":"none"}}),textWrapper:{"data-gallery-id":this.props.id}}},onMouseEnter:function(e){var t=this.refs[e];this.state.hoveredImage!==t&&this.setState({hoveredImage:t,$itemSelection:"rollover"})},onRollOut:function(e,t,i){("IMG"!==e.target.tagName||i)&&this.setState({hoveredImage:null,$itemSelection:"idle"})},onComponentTouchStart:function(e){this.onMouseEnter(e),"touchRollOut"===this.state.$touchRollOverSupport&&this.setState({$touchRollOverSupport:"touchRollOver"})},onWindowTouchStart:function(e){var t=e.target.getAttribute("data-gallery-id")||e.target.parentNode.getAttribute("data-gallery-id");"touchRollOver"===this.state.$touchRollOverSupport&&t!==this.props.id&&(this.onRollOut({target:""},null,!0),this.setState({$touchRollOverSupport:"touchRollOut"}))},next:function(e){this.movePage(!1,e)},prev:function(e){this.movePage(!0,e)},movePage:function(t,i){var o=this.props.compProp,s=this.props.compData,n=t?w.getPrevPageItemIndex(this.state.currentIndex,o.numCols,o.maxRows,s.items.length):w.getNextPageItemIndex(this.state.currentIndex,o.numCols,o.maxRows,s.items.length);if(this.isAnimating||n===this.state.currentIndex)return this._movePageQueue||(this._movePageQueue=[]),void this._movePageQueue.push(t);var a,r,p=w.getPageItems(s.items,n,o.numCols,o.maxRows),l=w.getPageItems(s.items,this.state.currentIndex,o.numCols,o.maxRows);this.props.createGalleryItem?(a=this.convertDataItemsToRefs(l,this.state.currentIndex),r=this.convertDataItemsToRefs(p,n)):(a=e.map(l,"id"),r=e.map(p,"id")),p&&(this.props.registerReLayout?this.props.registerReLayout():this.registerReLayout(),this.setState({$animationInProcess:"animationInProcess",$itemSelection:"idle"},function(){this.performAnimation(a,r,t,n,i)}))},performAnimation:function(t,i,o,s,n){var a=this.props.compProp,r=S.getAvailableRowsNumber(a.maxRows,a.numCols,this.props.compData.items.length),p=I.getSortedArrayAndStagger(a.transition,t,i,r,a.numCols,this.timingFunctionIndex||0),c=p.transName,u=this.props.getPaginatedGridGalleryMeasures(this.props.id),h=l(a,u.width||this.props.style.width,u.height||this.props.style.height,r,this.props.skin,c);this.timingFunctionIndex=p.timingFunctionIndex+1;var m="none"===a.transition?0:a.transDuration,y=p.stagger,g=this.sequence(),f=p.sporadicallyRandom&&p.sourceNodesArrSorted.length>1;p.sourceNodesArrSorted.length!==p.destNodesArrSorted.length&&d(p.sourceNodesArrSorted,p.destNodesArrSorted),e.forEach(p.sourceNodesArrSorted,function(e,t){var i=p.destNodesArrSorted[t],s={width:h.width,height:h.height,reverse:f?Math.random()>.5:!!o},n=y;"Shrink"!==c&&"CrossFade"!==c||(s.stagger=y,n=0),g.add({sourceRefs:e,destRefs:i},c,m,0,s,t*n)}),g.onStartAll(function(){this.isAnimating=!0}.bind(this)).onCompleteAll(function(){this.animationCompleteCallback(s,n)}.bind(this)).execute()},animationCompleteCallback:function(t,i){this.isAnimating=!1,this.props.onAnimationCompleteCallback&&this.props.onAnimationCompleteCallback(),this.setState({currentIndex:t,$animationInProcess:null},function(){this.updateAutoplayState(),e.isFunction(i)&&i()}.bind(this)),this._movePageQueue&&this._movePageQueue.length>0&&setTimeout(function(){this.movePage(this._movePageQueue.shift())}.bind(this),100)},createDisplayedItems:function(t,i,o,s,n){var a=this.props.compProp,r=this.props.compData,p=parseFloat(this.props.style.width),l=S.getItemWidth(a.margin,a.numCols,p,k.getSkinWidthDiff(this.props.skin)),c=S.getAvailableRowsNumber(a.maxRows,a.numCols,r.items.length),d=S.getItemHeight(a.margin,this.props.style.height,c,k.getSkinHeightDiff(this.props.skin)),u=[],h=[],m=e.map(t,function(e,i){return this.createGalleryItem(e,i,l,d,this.state.currentIndex,t.length,"curr")}.bind(this));return s!==this.state.currentIndex&&(u=e.map(i,function(e,t){return this.createGalleryItem(e,t,l,d,s,i.length,"next",{visibility:"hidden"})}.bind(this))),n!==s&&n!==this.state.currentIndex&&(h=e.map(o,function(e,t){return this.createGalleryItem(e,t,l,d,n,o.length,"prev",{visibility:"hidden"})}.bind(this))),u.concat(h).concat(m)},createGalleryItem:function(e,t,i,o,s,n,a,r){return this.props.createGalleryItem?this.props.createGalleryItem(this.props.id,e,t,s,n,r,this.classSet):this.createImageItem(e,t,i,o,s,a,r)},convertDataItemsToRefs:function(e,t){for(var i=[],o=0;o<e.length;o++){var s=this.props.getItemRef?this.props.getItemRef(this.props.id,t,o):this.getImageItemRef(t,o);i.push(s)}return i},getImageItemRef:function(e,t){return this.props.id+e+t},createImageItem:function(t,i,o,s,n,r,p){var l=S.getItemPosition(i,o,s,this.props.compProp.margin,this.props.compProp.numCols),c=S.getImageStyle(s,o,t.height,t.width);return this.createChildComponent(t,"core.components.Image","img",{id:this.props.id+t.id,ref:t.id,key:t.id,imageData:t,containerWidth:Math.round(o),containerHeight:Math.round(s),displayMode:a.imageUtils.fittingTypes.SCALE_TO_FILL,imgStyle:c,"data-gallery-id":this.props.id,"data-page-desc":r,"data-query":t.id,"data-image-index":n+i,onMouseEnter:this.onMouseEnter.bind(this,t.id),onTouchStart:this.onComponentTouchStart.bind(this,t.id),style:e.merge({left:l.left,top:l.top,position:"absolute",overflow:"hidden",transform:"none",clip:"auto"},p)})}};return o.compRegistrar.register("wysiwyg.viewer.components.PaginatedGridGallery",M,!0),M}),define("components/components/bootstrap/page/page",["lodash","santaProps","components/common/mediaCommon/mediaCommon","containerCommon","core"],function(e,t,i,o,s){"use strict";var n=o.mixins.containerMixin,a={displayName:"WixPage",mixins:[i.mediaLogicMixins.fill,n],propTypes:{id:t.Types.Component.id,compData:t.Types.Component.compData,compDesign:t.Types.Media.Popup.data,compStaticBehaviors:t.Types.Component.compStaticBehaviors,isMobileView:t.Types.isMobileView.isRequired,isMobileDevice:t.Types.Device.isMobileDevice.isRequired,closePopupPage:t.Types.popupPage.close,siteScrollingBlocker:t.Types.SiteAspects.siteScrollingBlocker.isRequired,markVisitedPage:t.Types.Page.markVisitedPage,mediaQuality:t.Types.Media.Popup.mediaQuality,renderParts:t.Types.Media.Popup.renderParts},statics:{useSantaTypes:!0,behaviors:i.mediaBehaviors.fill},componentDidMount:function(){this.props.compData.isPopup&&this.props.isMobileView&&this.props.isMobileDevice&&this.props.siteScrollingBlocker.setSiteScrollingBlocked(this,!0),this.props.markVisitedPage&&this.props.markVisitedPage(this.props.id)},componentWillUnmount:function(){this.props.compData.isPopup&&this.props.isMobileView&&this.props.isMobileDevice&&this.props.siteScrollingBlocker.setSiteScrollingBlocked(this,!1)},shouldCloseOverlay:function(t){return e.get(this.props,["compProp",t,"popup","closeOnOverlayClick"])},getBalataProps:function(){var e=this.props.isMobileView?"mobile":"desktop";return{id:this.props.id,onClick:this.shouldCloseOverlay(e)?this.props.closePopupPage:null,bgStyle:i.popupMediaStyle}},getSkinProperties:function(){return this.props.compData.isPopup?{"":{style:{position:"relative"}},inlineContent:{children:this.props.children,style:{pointerEvents:"none"}},bg:this.createFillLayers(this.getBalataProps())}:{inlineContent:{children:this.props.children}}}};return s.compRegistrar.register("wixapps.integration.components.AppPage",a,!0).register("mobile.core.components.Page",a,!0),a}),define("components/components/bootstrap/siteBackground/siteBackground",["lodash","santaProps","core","utils","components/common/mediaCommon/mediaCommon","backgroundCommon"],function(e,t,i,o,s,n){"use strict";function a(e){return e.isExperimentOpen("sv_mobileBgFixed")?e.isMobileView?"viewport"!==e.compData.mediaSizing:!e.fixedSiteBackground:e.isMobileView||!e.fixedSiteBackground}function r(t,i){var o=e.get(t,"scrollType"),s=e.get(t,["mediaRef","type"]);return(!("Image"===s||"WixVideo"===s)||a(i)||i.isAndroidOldBrowser)&&(o="scroll"),o}function p(t,i){var o="absolute";return"WixVideo"!==e.get(t,["mediaRef","type"])&&"fixed"!==i&&"parallax"!==i||(o="fixed"),o}function l(e,t,i){var s=p(t,r(t,e)),n={top:0,height:v,width:f,backgroundColor:o.colorParser.getColor(e.colorsMap,t.color),display:i?"none":"",position:s};return e.isMobileView&&"fixed"===s&&(n.willChange="transform"),n}function c(e){var t=v;return"parallax"===e&&(t=P),t}function d(e){var t=b;return"parallax"===e&&(t=T),t}function u(e,t){var i=t.mediaRef,o=r(t,e),s={position:"absolute",top:d(o),height:c(o),width:f,opacity:i&&i.opacity};return e.isMobileView&&"fixed"===o&&(s.willChange="transform"),s}function h(t,i){var o=t.background,s=i.background,n=o.mediaRef||{},a=s.mediaRef||{},r=!o.mediaRef&&!s.mediaRef,p=r||n.type===a.type,l=t.mediaSizing===i.mediaSizing,c=["type","alignType","fittingType","scrollType","colorOverlay","colorOverlayOpacity","color","videoId","uri","opacity"];return"WixVideo"===n.type&&p?c=e.without(c,"color"):r&&(c=["color"]),p&&l&&m(o,s,["mediaRef","imageOverlay"],c)}function m(t,i,o,s){var n=e.every(s,function(e){return(t&&t[e])===(i&&i[e])});return n=n&&e.every(o,function(e){return!t||m(t[e],i[e],o,s)})}function y(e,t){var i=t.colorOverlay?o.colorParser.getColor(e.colorsMap,t.colorOverlay,t.colorOverlayOpacity):null,s=g(e,t.imageOverlay);return{position:"absolute",top:0,width:f,height:v,backgroundImage:s,backgroundColor:i}}function g(e,t){return t?"url("+o.urlUtils.joinURL(e.staticMediaUrl,t.uri)+")":null}var f="100%",v="100%",b=0,P="120%",T=0,S=o.mediaConsts,k={displayName:"SiteBackground",mixins:[s.mediaLogicMixins.fill,i.compMixins.skinBasedComp,i.compMixins.animationsMixin,n.mixins.backgroundDetectionMixin],propTypes:e.defaults({id:t.Types.Component.id,compData:t.Types.Media.SiteBackground.data,actionsAspect:t.Types.SiteAspects.actionsAspect.isRequired,currentUrlPageId:t.Types.Component.currentUrlPageId,isMobileView:t.Types.isMobileView.isRequired,isTouchDevice:t.Types.Device.isTouchDevice,isAndroidOldBrowser:t.Types.Browser.isAndroidOldBrowser,colorsMap:t.Types.Theme.colorsMap,staticMediaUrl:t.Types.ServiceTopology.staticMediaUrl,componentViewMode:t.Types.RenderFlags.componentViewMode.isRequired,fixedSiteBackground:t.Types.BrowserFlags.fixedSiteBackground.isRequired,mediaQuality:t.Types.Media.SiteBackground.mediaQuality,renderParts:t.Types.Media.SiteBackground.renderParts,isExperimentOpen:t.Types.isExperimentOpen},t.santaTypesUtils.getSantaTypesByDefinition(n.components.html5Video)),statics:{useSantaTypes:!0,behaviors:s.mediaBehaviors.fill},previousScroll:null,getInitialState:function(){return this.size={},{resetAttachment:!1,hidePrevious:!1}},callForBackgroundChange:function(t){var i={onComplete:function(){this.isPageChanged()&&(e.result(this.refs,["previousVideo","kill"]),this.setState({previousPageBackground:null,resetAttachment:!1,hidePrevious:!0}))}.bind(this)};this.props.actionsAspect.registerNextBGPageTransition(this,"previous","current",i),this.setState({previousPageBackground:t,resetAttachment:!0,hidePrevious:!1,currentVisiblePageId:null})},componentWillReceiveProps:function(t){if(this.props.currentUrlPageId!==t.currentUrlPageId){var i=this.props.compData;h(i,t.compData)?(e.result(this.refs,["previousVideo","kill"]),this.setState({previousPageBackground:null,currentVisiblePageId:this.state.currentVisiblePageId||this.props.compData.background.id})):this.callForBackgroundChange(i.background)}},handleParallaxBehavior:function(e){var t=r(e,this.props);("parallax"===this.previousScroll||"parallax"===t)&&(this.previousScroll=t,"parallax"===t?this.props.actionsAspect.registerBehaviors("currentImage","siteBackground",[{action:"bgScrub",name:"SiteBackgroundParallax",duration:1,delay:0}]):this.props.actionsAspect.unRegisterBehaviors("currentImage",[{action:"bgScrub",name:"SiteBackgroundParallax",duration:1,delay:0}]))},getClasses:function(){return""},isPageChanged:function(){return this.props.compData.background.id!==e.get(this.state,["previousPageBackground","id"])},createVideoComponent:function(t,i){var o={comp:"wysiwyg.viewer.components.background.html5Video",skin:"skins.viewer.bgVideo.html5VideoSkin",style:"bgVideo"},s=t.mediaRef,n="current"===i;return"WixVideo"!==e.get(s,"type")?(n&&this.setMediaAPI(null),null):this.createChildComponent(s,o.comp,{skin:o.skin,styleId:o.style},{id:this.props.id+i+"Video",key:"vid_"+s.videoId,notifyMediaState:this.onMediaChange,setMediaAPI:n?this.setMediaAPI:e.noop,videoRenderParts:this.props.renderParts.media.video,mediaQuality:this.props.mediaQuality,className:"siteBackground"+i+"Video",compProp:e.pick(s,S.playback.SUPPORTED_MEDIA_ATTRIBUTES)})},getSkinProperties:function(){var t=this.state.currentVisiblePageId||this.props.compData.background.id,i=e.get(this.state.previousPageBackground,"id","noPrev");i=i===t?"noPrev":i;var o,s,n,a,p=null,c=!this.props.isTouchDevice,d=this.props.id,h=this.props.compData.background,m=u(this.props,h);a={id:d+"_currentImage_"+t,style:m,"data-type":S.balataConsts.BG_IMAGE,"data-height":m.height},c&&((s=this.createVideoComponent(h,"current"))||this.setMediaAPI(null)),this.state.previousPageBackground&&(n={id:d+"_previousImage_"+i,style:(p=this.state.previousPageBackground)?u(this.props,p):{}},c&&(o=this.createVideoComponent(p,"previous"))),this.handleParallaxBehavior(h);var g=l(this.props,h,!1);return{"":{id:d,className:this.getClasses()},current:{key:t+r(h,this.props)+this.props.componentViewMode,id:d+"_current_"+t,style:g,"data-position":g.position},currentImage:a,currentVideo:s,currentOverlay:{id:d+"_currentOverlay_"+t,style:y(this.props,h)},previous:{key:i+r(p,this.props)+this.props.componentViewMode,id:d+"_previous_"+i,style:p?l(this.props,p,this.state.hidePrevious):{}},previousImage:n,previousVideo:o,previousOverlay:{id:d+"_previousOverlay_"+i,style:p?y(this.props,p):{}}}}};return i.compRegistrar.register("wysiwyg.viewer.components.SiteBackground",k,!0),k}),define("components",["core","compUtils","components/components/bootstrap/siteButton/siteButton","components/components/bootstrap/dropDownMenu/dropDownMenu","components/components/bootstrap/balata/balata","components/common/mediaCommon/mediaCommon","components/core/svgShapeStylesCollector","components/core/dialogsStylesCollector","components/core/appControllerStyleCollector","components/behaviors/compBehaviorsRegistrar","components/behaviors/scrubBehaviorsRegistrar","components/behaviors/animationBehaviorsRegistrar","components/components/bootstrap/masterPage/masterPage","components/components/bootstrap/wPhoto/wPhoto","components/components/bootstrap/wRichText/wRichText","components/components/bootstrap/screenWidthContainer/screenWidthContainer","components/components/bootstrap/infoTip/infoTip","components/components/bootstrap/pageGroup/pageGroup","components/components/bootstrap/headerContainer/headerContainer","components/components/bootstrap/footerContainer/footerContainer","components/components/bootstrap/video/video","components/components/bootstrap/wixSkinOnly/wixSkinOnly","components/components/bootstrap/textInput/textInput","components/components/bootstrap/sliderGallery/sliderGallery","components/components/bootstrap/paginatedGridGallery/paginatedGridGallery","components/components/bootstrap/page/page","components/components/bootstrap/siteBackground/siteBackground","components/components/bootstrap/menuButton/menuButton"],function(e,t,i,o,s,n){"use strict";return e.compRegistrar.registerMobxObserver(t.mobxObserverWrapper),{siteButton:i,dropDownMenu:o,balata:s,mediaCommon:n}});
//# sourceMappingURL=components.min.js.map